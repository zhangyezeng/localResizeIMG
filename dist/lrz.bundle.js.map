{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///lrz.bundle.js","webpack:///webpack/bootstrap 4363dd52ac95f9e897ed","webpack:///./src/lrz.js","webpack:///src/lib/Promise.js","webpack:///node_modules/timers-browserify/main.js","webpack:///node_modules/setimmediate/setImmediate.js","webpack:///node_modules/process/browser.js","webpack:///src/lib/Blob.FormData.shim.js","webpack:///src/lib/exif.js"],"names":["root","factory","exports","module","define","amd","a","i","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","parentJsonpFunction","window","chunkIds","moreModules","chunkId","callbacks","length","installedChunks","push","apply","Object","prototype","hasOwnProperty","shift","0","e","callback","undefined","head","document","getElementsByTagName","script","createElement","type","charset","async","src","p","appendChild","m","c","Lrz","file","opts","that","Error","defaults","width","height","fieldName","quality","init","getJsDir","filter","scripts","v","indexOf","substr","lastIndexOf","dataURItoBlob","dataURI","byteString","split","atob","unescape","mimeString","ia","Uint8Array","charCodeAt","BlobFormDataShim","Blob","buffer","URL","webkitURL","Promise","exif","UA","userAgent","ISOldIOS","exec","isOldAndroid","oldIOS","pop","oldAndroid","iOS","test","android","mQQBrowser","navigator","fileIsString","fileIsBase64","img","Image","canvas","blob","createObjectURL","fileName","name","getContext","resolve","reject","onerror","err","onload","_getBase64","then","base64","formData","size","FormData","append","replace","fileLen","base64Len","origin","revokeObjectURL","crossOrigin","getData","orientation","getTag","resize","_getResize","ctx","fillStyle","fillRect","_createBase64ForOldIOS","_createBase64","__WEBPACK_AMD_REQUIRE_ARRAY__","MegaPixImage","mpImg","render","toDataURL","rotate","Math","PI","drawImage","translate","scale","JPEGEncoder","encoder","getImageData","encode","ret","ceil","lrz","version","setImmediate","bind","fn","thisArg","arguments","TypeError","_state","_value","_deferreds","doResolve","handle","deferred","me","asap","cb","onFulfilled","onRejected","newValue","finale","len","Handler","done","value","reason","ex","setTimeout","isArray","Array","toString","all","args","slice","res","val","remaining","constructor","race","values","_setImmediateFn","always","global","Timeout","clearFn","_id","_clearFn","scope","self","Function","clearTimeout","setInterval","clearInterval","timeout","close","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","clearImmediate","process","task","tasksByHandle","nextHandle","registerImmediate","run","runIfPresent","currentlyRunningATask","installNextTickImplementation","nextTick","canUsePostMessage","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","installPostMessageImplementation","messagePrefix","random","onGlobalMessage","event","source","data","addEventListener","attachEvent","installMessageChannelImplementation","channel","MessageChannel","port1","port2","installReadyStateChangeImplementation","html","doc","documentElement","onreadystatechange","removeChild","installSetTimeoutImplementation","attachTo","getPrototypeOf","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","runClearTimeout","marker","cachedClearTimeout","cleanUpNextTick","draining","currentQueue","queue","concat","queueIndex","drainQueue","Item","array","noop","title","browser","env","argv","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","hasFormDataBug","bCheck","vendor","match","BlobConstructor","parts","bb","BlobBuilder","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","forEach","getBlob","FormDataShim","o","boundary","join","Date","oldSend","XMLHttpRequest","send","getParts","filename","formDataShimNums","fr","oXHR","FileReader","result","readAsArrayBuffer","setRequestHeader","create","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","imageHasData","base64ToArrayBuffer","contentType","binary","ArrayBuffer","view","objectURLToBlob","url","http","open","responseType","status","response","handleBinaryFile","binFile","iptcdata","exifdata","arrayBuffer","fileReader","target","File","debug","console","log","byteLength","findEXIFinJPEG","dataView","DataView","getUint8","offset","readEXIFData","getUint16","readTags","tiffStart","dirStart","strings","bigEnd","entryOffset","tag","entries","tags","readTagValue","vals","n","numerator","denominator","numValues","getUint32","valueOffset","getStringFromDB","Number","getInt32","start","outstr","String","fromCharCode","exifData","gpsData","tiffOffset","firstIFDOffset","TiffTags","ExifIFDPointer","ExifTags","StringValues","Components","GPSInfoIFDPointer","GPSTags","EXIF","obj","EXIFwrapped","Tags","36864","40960","40961","40962","40963","37121","37122","37500","37510","40964","36867","36868","37520","37521","37522","33434","33437","34850","34852","34855","34856","37377","37378","37379","37380","37381","37382","37383","37384","37385","37396","37386","41483","41484","41486","41487","41488","41492","41493","41495","41728","41729","41730","41985","41986","41987","41988","41989","41990","41991","41992","41993","41994","41995","41996","40965","42016","256","257","34665","34853","258","259","262","274","277","284","530","531","282","283","296","273","278","279","513","514","301","318","319","529","532","306","270","271","272","305","315","33432","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","ExposureProgram","MeteringMode","255","LightSource","Flash","31","32","65","69","71","73","77","79","89","93","95","SensingMethod","SceneCaptureType","SceneType","CustomRendered","WhiteBalance","GainControl","Contrast","Saturation","Sharpness","SubjectDistanceRange","FileSource","HTMLImageElement","complete","getAllTags","pretty","strPretty","readFromBinaryFile"],"mappings":"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","file":"lrz.bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// install a JSONP callback for chunk loading\n/******/ \tvar parentJsonpFunction = window[\"webpackJsonp\"];\n/******/ \twindow[\"webpackJsonp\"] = function webpackJsonpCallback(chunkIds, moreModules) {\n/******/ \t\t// add \"moreModules\" to the modules object,\n/******/ \t\t// then flag all \"chunkIds\" as loaded and fire callback\n/******/ \t\tvar moduleId, chunkId, i = 0, callbacks = [];\n/******/ \t\tfor(;i < chunkIds.length; i++) {\n/******/ \t\t\tchunkId = chunkIds[i];\n/******/ \t\t\tif(installedChunks[chunkId])\n/******/ \t\t\t\tcallbacks.push.apply(callbacks, installedChunks[chunkId]);\n/******/ \t\t\tinstalledChunks[chunkId] = 0;\n/******/ \t\t}\n/******/ \t\tfor(moduleId in moreModules) {\n/******/ \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n/******/ \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n/******/ \t\t\t}\n/******/ \t\t}\n/******/ \t\tif(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules);\n/******/ \t\twhile(callbacks.length)\n/******/ \t\t\tcallbacks.shift().call(null, __webpack_require__);\n/******/\n/******/ \t};\n/******/\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// object to store loaded and loading chunks\n/******/ \t// \"0\" means \"already loaded\"\n/******/ \t// Array means \"loading\", array contains callbacks\n/******/ \tvar installedChunks = {\n/******/ \t\t0:0\n/******/ \t};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/ \t// This file contains only the entry chunk.\n/******/ \t// The chunk loading function for additional chunks\n/******/ \t__webpack_require__.e = function requireEnsure(chunkId, callback) {\n/******/ \t\t// \"0\" is the signal for \"already loaded\"\n/******/ \t\tif(installedChunks[chunkId] === 0)\n/******/ \t\t\treturn callback.call(null, __webpack_require__);\n/******/\n/******/ \t\t// an array means \"currently loading\".\n/******/ \t\tif(installedChunks[chunkId] !== undefined) {\n/******/ \t\t\tinstalledChunks[chunkId].push(callback);\n/******/ \t\t} else {\n/******/ \t\t\t// start chunk loading\n/******/ \t\t\tinstalledChunks[chunkId] = [callback];\n/******/ \t\t\tvar head = document.getElementsByTagName('head')[0];\n/******/ \t\t\tvar script = document.createElement('script');\n/******/ \t\t\tscript.type = 'text/javascript';\n/******/ \t\t\tscript.charset = 'utf-8';\n/******/ \t\t\tscript.async = true;\n/******/\n/******/ \t\t\tscript.src = __webpack_require__.p + \"\" + ({}[chunkId]||chunkId) + \".chunk.js\";\n/******/ \t\t\thead.appendChild(script);\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t// 保证按需加载的文件路径正确\r\n\t__webpack_require__.p = getJsDir('lrz') + '/';\r\n\twindow.URL              = window.URL || window.webkitURL;\r\n\t\r\n\tvar Promise          = __webpack_require__(1),\r\n\t    BlobFormDataShim = __webpack_require__(5),\r\n\t    exif             = __webpack_require__(6);\r\n\t\r\n\t\r\n\tvar UA = (function (userAgent) {\r\n\t    var ISOldIOS     = /OS (\\d)_.* like Mac OS X/g.exec(userAgent),\r\n\t        isOldAndroid = /Android (\\d.*?);/g.exec(userAgent) || /Android\\/(\\d.*?) /g.exec(userAgent);\r\n\t\r\n\t    // 判断设备是否是IOS7以下\r\n\t    // 判断设备是否是android4.5以下\r\n\t    // 判断是否iOS\r\n\t    // 判断是否android\r\n\t    // 判断是否QQ浏览器\r\n\t    return {\r\n\t        oldIOS    : ISOldIOS ? +ISOldIOS.pop() < 8 : false,\r\n\t        oldAndroid: isOldAndroid ? +isOldAndroid.pop().substr(0, 3) < 4.5 : false,\r\n\t        iOS       : /\\(i[^;]+;( U;)? CPU.+Mac OS X/.test(userAgent),\r\n\t        android   : /Android/g.test(userAgent),\r\n\t        mQQBrowser: /MQQBrowser/g.test(userAgent)\r\n\t    }\r\n\t})(navigator.userAgent);\r\n\t\r\n\t\r\n\tfunction Lrz (file, opts) {\r\n\t    var that = this;\r\n\t\r\n\t    if (!file) throw new Error('没有收到图片，可能的解决方案：https://github.com/think2011/localResizeIMG/issues/7');\r\n\t\r\n\t    opts = opts || {};\r\n\t\r\n\t    that.defaults = {\r\n\t        width    : null,\r\n\t        height   : null,\r\n\t        fieldName: 'file',\r\n\t        quality  : 0.7\r\n\t    };\r\n\t\r\n\t    that.file = file;\r\n\t\r\n\t    for (var p in opts) {\r\n\t        if (!opts.hasOwnProperty(p)) continue;\r\n\t        that.defaults[p] = opts[p];\r\n\t    }\r\n\t\r\n\t    return this.init();\r\n\t}\r\n\t\r\n\tLrz.prototype.init = function () {\r\n\t    var that         = this,\r\n\t        file         = that.file,\r\n\t        fileIsString = typeof file === 'string',\r\n\t        fileIsBase64 = /^data:/.test(file),\r\n\t        img          = new Image(),\r\n\t        canvas       = document.createElement('canvas'),\r\n\t        blob         = fileIsString ? file : URL.createObjectURL(file);\r\n\t\r\n\t    that.img    = img;\r\n\t    that.blob   = blob;\r\n\t    that.canvas = canvas;\r\n\t\r\n\t    if (fileIsString) {\r\n\t        that.fileName = fileIsBase64 ? 'base64.jpg' : (file.split('/').pop());\r\n\t    } else {\r\n\t        that.fileName = file.name;\r\n\t    }\r\n\t\r\n\t    if (!document.createElement('canvas').getContext) {\r\n\t        throw new Error('浏览器不支持canvas');\r\n\t    }\r\n\t\r\n\t    return new Promise(function (resolve, reject) {\r\n\t        img.onerror = function () {\r\n\t            var err = new Error('加载图片文件失败');\r\n\t            reject(err);\r\n\t            throw err;\r\n\t        };\r\n\t\r\n\t        img.onload = function () {\r\n\t            that._getBase64()\r\n\t                .then(function (base64) {\r\n\t                    if (base64.length < 10) {\r\n\t                        var err = new Error('生成base64失败');\r\n\t                        reject(err);\r\n\t                        throw err;\r\n\t                    }\r\n\t\r\n\t                    return base64;\r\n\t                })\r\n\t                .then(function (base64) {\r\n\t                    var formData = null;\r\n\t\r\n\t                    // 压缩文件太大就采用源文件,且使用原生的FormData() @source #55\r\n\t                    if (typeof that.file === 'object' && base64.length > that.file.size) {\r\n\t                        formData = new FormData();\r\n\t                        file     = that.file;\r\n\t                    } else {\r\n\t                        formData = new BlobFormDataShim.FormData();\r\n\t                        file     = dataURItoBlob(base64);\r\n\t                    }\r\n\t\r\n\t                    formData.append(that.defaults.fieldName, file, (that.fileName.replace(/\\..+/g, '.jpg')));\r\n\t\r\n\t                    resolve({\r\n\t                        formData : formData,\r\n\t                        fileLen : +file.size,\r\n\t                        base64  : base64,\r\n\t                        base64Len: base64.length,\r\n\t                        origin   : that.file,\r\n\t                        file   : file\r\n\t                    });\r\n\t\r\n\t                    // 释放内存\r\n\t                    for (var p in that) {\r\n\t                        if (!that.hasOwnProperty(p)) continue;\r\n\t\r\n\t                        that[p] = null;\r\n\t                    }\r\n\t                    URL.revokeObjectURL(that.blob);\r\n\t                });\r\n\t        };\r\n\t\r\n\t        // 如果传入的是base64在移动端会报错\r\n\t        !fileIsBase64 && (img.crossOrigin = \"*\");\r\n\t\r\n\t        img.src = blob;\r\n\t    });\r\n\t};\r\n\t\r\n\tLrz.prototype._getBase64 = function () {\r\n\t    var that   = this,\r\n\t        img    = that.img,\r\n\t        file   = that.file,\r\n\t        canvas = that.canvas;\r\n\t\r\n\t    return new Promise(function (resolve) {\r\n\t        try {\r\n\t            // 传入blob在android4.3以下有bug\r\n\t            exif.getData(typeof file === 'object' ? file : img, function () {\r\n\t                that.orientation = exif.getTag(this, \"Orientation\");\r\n\t\r\n\t                that.resize = that._getResize();\r\n\t                that.ctx    = canvas.getContext('2d');\r\n\t\r\n\t                canvas.width  = that.resize.width;\r\n\t                canvas.height = that.resize.height;\r\n\t\r\n\t                // 设置为白色背景，jpg是不支持透明的，所以会被默认为canvas默认的黑色背景。\r\n\t                that.ctx.fillStyle = '#fff';\r\n\t                that.ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\t\r\n\t                // 根据设备对应处理方式\r\n\t                if (UA.oldIOS) {\r\n\t                    that._createBase64ForOldIOS().then(resolve);\r\n\t                }\r\n\t                else {\r\n\t                    that._createBase64().then(resolve);\r\n\t                }\r\n\t            });\r\n\t        } catch (err) {\r\n\t            // 这样能解决低内存设备闪退的问题吗？\r\n\t            throw new Error(err);\r\n\t        }\r\n\t    });\r\n\t};\r\n\t\r\n\t\r\n\tLrz.prototype._createBase64ForOldIOS = function () {\r\n\t    var that        = this,\r\n\t        img         = that.img,\r\n\t        canvas      = that.canvas,\r\n\t        defaults    = that.defaults,\r\n\t        orientation = that.orientation;\r\n\t\r\n\t    return new Promise(function (resolve) {\r\n\t        __webpack_require__.e/* require */(1, function(__webpack_require__) { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(7)]; (function (MegaPixImage) {\r\n\t            var mpImg = new MegaPixImage(img);\r\n\t\r\n\t            if (\"5678\".indexOf(orientation) > -1) {\r\n\t                mpImg.render(canvas, {\r\n\t                    width      : canvas.height,\r\n\t                    height     : canvas.width,\r\n\t                    orientation: orientation\r\n\t                });\r\n\t            } else {\r\n\t                mpImg.render(canvas, {\r\n\t                    width      : canvas.width,\r\n\t                    height     : canvas.height,\r\n\t                    orientation: orientation\r\n\t                });\r\n\t            }\r\n\t\r\n\t            resolve(canvas.toDataURL('image/jpeg', defaults.quality));\r\n\t        }.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));});\r\n\t    });\r\n\t};\r\n\t\r\n\tLrz.prototype._createBase64 = function () {\r\n\t    var that        = this,\r\n\t        resize      = that.resize,\r\n\t        img         = that.img,\r\n\t        canvas      = that.canvas,\r\n\t        ctx         = that.ctx,\r\n\t        defaults    = that.defaults,\r\n\t        orientation = that.orientation;\r\n\t\r\n\t    // 调整为正确方向\r\n\t    switch (orientation) {\r\n\t        case 3:\r\n\t            ctx.rotate(180 * Math.PI / 180);\r\n\t            ctx.drawImage(img, -resize.width, -resize.height, resize.width, resize.height);\r\n\t            break;\r\n\t        case 6:\r\n\t            ctx.rotate(90 * Math.PI / 180);\r\n\t            ctx.drawImage(img, 0, -resize.width, resize.height, resize.width);\r\n\t            break;\r\n\t        case 8:\r\n\t            ctx.rotate(270 * Math.PI / 180);\r\n\t            ctx.drawImage(img, -resize.height, 0, resize.height, resize.width);\r\n\t            break;\r\n\t\r\n\t        case 2:\r\n\t            ctx.translate(resize.width, 0);\r\n\t            ctx.scale(-1, 1);\r\n\t            ctx.drawImage(img, 0, 0, resize.width, resize.height);\r\n\t            break;\r\n\t        case 4:\r\n\t            ctx.translate(resize.width, 0);\r\n\t            ctx.scale(-1, 1);\r\n\t            ctx.rotate(180 * Math.PI / 180);\r\n\t            ctx.drawImage(img, -resize.width, -resize.height, resize.width, resize.height);\r\n\t            break;\r\n\t        case 5:\r\n\t            ctx.translate(resize.width, 0);\r\n\t            ctx.scale(-1, 1);\r\n\t            ctx.rotate(90 * Math.PI / 180);\r\n\t            ctx.drawImage(img, 0, -resize.width, resize.height, resize.width);\r\n\t            break;\r\n\t        case 7:\r\n\t            ctx.translate(resize.width, 0);\r\n\t            ctx.scale(-1, 1);\r\n\t            ctx.rotate(270 * Math.PI / 180);\r\n\t            ctx.drawImage(img, -resize.height, 0, resize.height, resize.width);\r\n\t            break;\r\n\t\r\n\t        default:\r\n\t            ctx.drawImage(img, 0, 0, resize.width, resize.height);\r\n\t    }\r\n\t\r\n\t    return new Promise(function (resolve) {\r\n\t        if (UA.oldAndroid || UA.mQQBrowser || !navigator.userAgent) {\r\n\t            __webpack_require__.e/* require */(2, function(__webpack_require__) { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(8)]; (function (JPEGEncoder) {\r\n\t                var encoder = new JPEGEncoder(),\r\n\t                    img     = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n\t\r\n\t                resolve(encoder.encode(img, defaults.quality * 100));\r\n\t            }.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));})\r\n\t        }\r\n\t        else {\r\n\t            resolve(canvas.toDataURL('image/jpeg', defaults.quality));\r\n\t        }\r\n\t    });\r\n\t};\r\n\t\r\n\tLrz.prototype._getResize = function () {\r\n\t    var that        = this,\r\n\t        img         = that.img,\r\n\t        defaults    = that.defaults,\r\n\t        width       = defaults.width,\r\n\t        height      = defaults.height,\r\n\t        orientation = that.orientation;\r\n\t\r\n\t    var ret = {\r\n\t        width : img.width,\r\n\t        height: img.height\r\n\t    };\r\n\t\r\n\t    if (\"5678\".indexOf(orientation) > -1) {\r\n\t        ret.width  = img.height;\r\n\t        ret.height = img.width;\r\n\t    }\r\n\t\r\n\t    // 如果原图小于设定，采用原图\r\n\t    if (ret.width < width || ret.height < height) {\r\n\t        return ret;\r\n\t    }\r\n\t\r\n\t    var scale = ret.width / ret.height;\r\n\t\r\n\t    if (width && height) {\r\n\t        if (scale >= width / height) {\r\n\t            if (ret.width > width) {\r\n\t                ret.width  = width;\r\n\t                ret.height = Math.ceil(width / scale);\r\n\t            }\r\n\t        } else {\r\n\t            if (ret.height > height) {\r\n\t                ret.height = height;\r\n\t                ret.width  = Math.ceil(height * scale);\r\n\t            }\r\n\t        }\r\n\t    }\r\n\t    else if (width) {\r\n\t        if (width < ret.width) {\r\n\t            ret.width  = width;\r\n\t            ret.height = Math.ceil(width / scale);\r\n\t        }\r\n\t    }\r\n\t    else if (height) {\r\n\t        if (height < ret.height) {\r\n\t            ret.width  = Math.ceil(height * scale);\r\n\t            ret.height = height;\r\n\t        }\r\n\t    }\r\n\t\r\n\t    // 超过这个值base64无法生成，在IOS上\r\n\t    while (ret.width >= 3264 || ret.height >= 2448) {\r\n\t        ret.width *= 0.8;\r\n\t        ret.height *= 0.8;\r\n\t    }\r\n\t\r\n\t    return ret;\r\n\t};\r\n\t\r\n\t/**\r\n\t * 获取当前js文件所在路径，必须得在代码顶部执行此函数\r\n\t * @returns {string}\r\n\t */\r\n\tfunction getJsDir (src) {\r\n\t    var script = null;\r\n\t\r\n\t    if (src) {\r\n\t        script = [].filter.call(document.scripts, function (v) {\r\n\t            return v.src.indexOf(src) !== -1;\r\n\t        })[0];\r\n\t    } else {\r\n\t        script = document.scripts[document.scripts.length - 1];\r\n\t    }\r\n\t\r\n\t    if (!script) return null;\r\n\t\r\n\t    return script.src.substr(0, script.src.lastIndexOf('/'));\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * 转换成formdata\r\n\t * @param dataURI\r\n\t * @returns {*}\r\n\t *\r\n\t * @source http://stackoverflow.com/questions/4998908/convert-data-uri-to-file-then-append-to-formdata\r\n\t */\r\n\tfunction dataURItoBlob (dataURI) {\r\n\t    // convert base64/URLEncoded data component to raw binary data held in a string\r\n\t    var byteString;\r\n\t    if (dataURI.split(',')[0].indexOf('base64') >= 0)\r\n\t        byteString = atob(dataURI.split(',')[1]);\r\n\t    else\r\n\t        byteString = unescape(dataURI.split(',')[1]);\r\n\t\r\n\t    // separate out the mime component\r\n\t    var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];\r\n\t\r\n\t    // write the bytes of the string to a typed array\r\n\t    var ia = new Uint8Array(byteString.length);\r\n\t    for (var i = 0; i < byteString.length; i++) {\r\n\t        ia[i] = byteString.charCodeAt(i);\r\n\t    }\r\n\t\r\n\t    return new BlobFormDataShim.Blob([ia.buffer], {type: mimeString});\r\n\t}\r\n\t\r\n\twindow.lrz = function (file, opts) {\r\n\t    return new Lrz(file, opts);\r\n\t};\r\n\t\r\n\t// 版本号来自package.json，构建时自动填充\r\n\twindow.lrz.version = '4.9.40';\r\n\t\r\n\tmodule.exports = window.lrz;\r\n\t\r\n\t/**\r\n\t *\r\n\t * 　　　┏┓　　　┏┓\r\n\t * 　　┏┛┻━━━┛┻┓\r\n\t * 　　┃　　　　　　　┃\r\n\t * 　　┃　　　━　　　┃\r\n\t * 　　┃　┳┛　┗┳　┃\r\n\t * 　　┃　　　　　　　┃\r\n\t * 　　┃　　　┻　　　┃\r\n\t * 　　┃　　　　　　　┃\r\n\t * 　　┗━┓　　　┏━┛Code is far away from bug with the animal protecting\r\n\t * 　　　　┃　　　┃    神兽保佑,代码无bug\r\n\t * 　　　　┃　　　┃\r\n\t * 　　　　┃　　　┗━━━┓\r\n\t * 　　　　┃　　　　　 ┣┓\r\n\t * 　　　　┃　　　　 ┏┛\r\n\t * 　　　　┗┓┓┏━┳┓┏┛\r\n\t * 　　　　　┃┫┫　┃┫┫\r\n\t * 　　　　　┗┻┛　┗┻┛\r\n\t *\r\n\t */\r\n\t\r\n\t\r\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(setImmediate) {(function (root) {\r\n\t\r\n\t    // Use polyfill for setImmediate for performance gains\r\n\t    var asap = (typeof setImmediate === 'function' && setImmediate) ||\r\n\t        function (fn) {\r\n\t            setTimeout(fn, 1);\r\n\t        };\r\n\t\r\n\t    // Polyfill for Function.prototype.bind\r\n\t    function bind (fn, thisArg) {\r\n\t        return function () {\r\n\t            fn.apply(thisArg, arguments);\r\n\t        }\r\n\t    }\r\n\t\r\n\t    var isArray = Array.isArray || function (value) {\r\n\t            return Object.prototype.toString.call(value) === \"[object Array]\"\r\n\t        };\r\n\t\r\n\t    function Promise (fn) {\r\n\t        if (typeof this !== 'object') throw new TypeError('Promises must be constructed via new');\r\n\t        if (typeof fn !== 'function') throw new TypeError('not a function');\r\n\t        this._state     = null;\r\n\t        this._value     = null;\r\n\t        this._deferreds = []\r\n\t\r\n\t        doResolve(fn, bind(resolve, this), bind(reject, this))\r\n\t    }\r\n\t\r\n\t    function handle (deferred) {\r\n\t        var me = this;\r\n\t        if (this._state === null) {\r\n\t            this._deferreds.push(deferred);\r\n\t            return\r\n\t        }\r\n\t        asap(function () {\r\n\t            var cb = me._state ? deferred.onFulfilled : deferred.onRejected\r\n\t            if (cb === null) {\r\n\t                (me._state ? deferred.resolve : deferred.reject)(me._value);\r\n\t                return;\r\n\t            }\r\n\t            var ret;\r\n\t            try {\r\n\t                ret = cb(me._value);\r\n\t            }\r\n\t            catch (e) {\r\n\t                deferred.reject(e);\r\n\t                return;\r\n\t            }\r\n\t            deferred.resolve(ret);\r\n\t        })\r\n\t    }\r\n\t\r\n\t    function resolve (newValue) {\r\n\t        try { //Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\r\n\t            if (newValue === this) throw new TypeError('A promise cannot be resolved with itself.');\r\n\t            if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\r\n\t                var then = newValue.then;\r\n\t                if (typeof then === 'function') {\r\n\t                    doResolve(bind(then, newValue), bind(resolve, this), bind(reject, this));\r\n\t                    return;\r\n\t                }\r\n\t            }\r\n\t            this._state = true;\r\n\t            this._value = newValue;\r\n\t            finale.call(this);\r\n\t        } catch (e) {\r\n\t            reject.call(this, e);\r\n\t        }\r\n\t    }\r\n\t\r\n\t    function reject (newValue) {\r\n\t        this._state = false;\r\n\t        this._value = newValue;\r\n\t        finale.call(this);\r\n\t    }\r\n\t\r\n\t    function finale () {\r\n\t        for (var i = 0, len = this._deferreds.length; i < len; i++) {\r\n\t            handle.call(this, this._deferreds[i]);\r\n\t        }\r\n\t        this._deferreds = null;\r\n\t    }\r\n\t\r\n\t    function Handler (onFulfilled, onRejected, resolve, reject) {\r\n\t        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\r\n\t        this.onRejected  = typeof onRejected === 'function' ? onRejected : null;\r\n\t        this.resolve     = resolve;\r\n\t        this.reject      = reject;\r\n\t    }\r\n\t\r\n\t    /**\r\n\t     * Take a potentially misbehaving resolver function and make sure\r\n\t     * onFulfilled and onRejected are only called once.\r\n\t     *\r\n\t     * Makes no guarantees about asynchrony.\r\n\t     */\r\n\t    function doResolve (fn, onFulfilled, onRejected) {\r\n\t        var done = false;\r\n\t        try {\r\n\t            fn(function (value) {\r\n\t                if (done) return;\r\n\t                done = true;\r\n\t                onFulfilled(value);\r\n\t            }, function (reason) {\r\n\t                if (done) return;\r\n\t                done = true;\r\n\t                onRejected(reason);\r\n\t            })\r\n\t        } catch (ex) {\r\n\t            if (done) return;\r\n\t            done = true;\r\n\t            onRejected(ex);\r\n\t        }\r\n\t    }\r\n\t\r\n\t    Promise.prototype['catch'] = function (onRejected) {\r\n\t        return this.then(null, onRejected);\r\n\t    };\r\n\t\r\n\t    Promise.prototype.then = function (onFulfilled, onRejected) {\r\n\t        var me = this;\r\n\t        return new Promise(function (resolve, reject) {\r\n\t            handle.call(me, new Handler(onFulfilled, onRejected, resolve, reject));\r\n\t        })\r\n\t    };\r\n\t\r\n\t    Promise.all = function () {\r\n\t        var args = Array.prototype.slice.call(arguments.length === 1 && isArray(arguments[0]) ? arguments[0] : arguments);\r\n\t\r\n\t        return new Promise(function (resolve, reject) {\r\n\t            if (args.length === 0) return resolve([]);\r\n\t            var remaining = args.length;\r\n\t\r\n\t            function res (i, val) {\r\n\t                try {\r\n\t                    if (val && (typeof val === 'object' || typeof val === 'function')) {\r\n\t                        var then = val.then;\r\n\t                        if (typeof then === 'function') {\r\n\t                            then.call(val, function (val) {\r\n\t                                res(i, val)\r\n\t                            }, reject);\r\n\t                            return;\r\n\t                        }\r\n\t                    }\r\n\t                    args[i] = val;\r\n\t                    if (--remaining === 0) {\r\n\t                        resolve(args);\r\n\t                    }\r\n\t                } catch (ex) {\r\n\t                    reject(ex);\r\n\t                }\r\n\t            }\r\n\t\r\n\t            for (var i = 0; i < args.length; i++) {\r\n\t                res(i, args[i]);\r\n\t            }\r\n\t        });\r\n\t    };\r\n\t\r\n\t    Promise.resolve = function (value) {\r\n\t        if (value && typeof value === 'object' && value.constructor === Promise) {\r\n\t            return value;\r\n\t        }\r\n\t\r\n\t        return new Promise(function (resolve) {\r\n\t            resolve(value);\r\n\t        });\r\n\t    };\r\n\t\r\n\t    Promise.reject = function (value) {\r\n\t        return new Promise(function (resolve, reject) {\r\n\t            reject(value);\r\n\t        });\r\n\t    };\r\n\t\r\n\t    Promise.race = function (values) {\r\n\t        return new Promise(function (resolve, reject) {\r\n\t            for (var i = 0, len = values.length; i < len; i++) {\r\n\t                values[i].then(resolve, reject);\r\n\t            }\r\n\t        });\r\n\t    };\r\n\t\r\n\t    /**\r\n\t     * Set the immediate function to execute callbacks\r\n\t     * @param fn {function} Function to execute\r\n\t     * @private\r\n\t     */\r\n\t    Promise._setImmediateFn = function _setImmediateFn (fn) {\r\n\t        asap = fn;\r\n\t    };\r\n\t\r\n\t\r\n\t    Promise.prototype.always = function (callback) {\r\n\t        var constructor = this.constructor;\r\n\t\r\n\t        return this.then(function (value) {\r\n\t            return constructor.resolve(callback()).then(function () {\r\n\t                return value;\r\n\t            });\r\n\t        }, function (reason) {\r\n\t            return constructor.resolve(callback()).then(function () {\r\n\t                throw reason;\r\n\t            });\r\n\t        });\r\n\t    };\r\n\t\r\n\t    if (typeof module !== 'undefined' && module.exports) {\r\n\t        module.exports = Promise;\r\n\t    } else if (!root.Promise) {\r\n\t        root.Promise = Promise;\r\n\t    }\r\n\t\r\n\t})(this);\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2).setImmediate))\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {var scope = (typeof global !== \"undefined\" && global) ||\n\t            (typeof self !== \"undefined\" && self) ||\n\t            window;\n\tvar apply = Function.prototype.apply;\n\t\n\t// DOM APIs, for completeness\n\t\n\texports.setTimeout = function() {\n\t  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n\t};\n\texports.setInterval = function() {\n\t  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n\t};\n\texports.clearTimeout =\n\texports.clearInterval = function(timeout) {\n\t  if (timeout) {\n\t    timeout.close();\n\t  }\n\t};\n\t\n\tfunction Timeout(id, clearFn) {\n\t  this._id = id;\n\t  this._clearFn = clearFn;\n\t}\n\tTimeout.prototype.unref = Timeout.prototype.ref = function() {};\n\tTimeout.prototype.close = function() {\n\t  this._clearFn.call(scope, this._id);\n\t};\n\t\n\t// Does not start the time, just sets up the members needed.\n\texports.enroll = function(item, msecs) {\n\t  clearTimeout(item._idleTimeoutId);\n\t  item._idleTimeout = msecs;\n\t};\n\t\n\texports.unenroll = function(item) {\n\t  clearTimeout(item._idleTimeoutId);\n\t  item._idleTimeout = -1;\n\t};\n\t\n\texports._unrefActive = exports.active = function(item) {\n\t  clearTimeout(item._idleTimeoutId);\n\t\n\t  var msecs = item._idleTimeout;\n\t  if (msecs >= 0) {\n\t    item._idleTimeoutId = setTimeout(function onTimeout() {\n\t      if (item._onTimeout)\n\t        item._onTimeout();\n\t    }, msecs);\n\t  }\n\t};\n\t\n\t// setimmediate attaches itself to the global object\n\t__webpack_require__(3);\n\t// On some exotic environments, it's not clear which object `setimmediate` was\n\t// able to install onto.  Search each possibility in the same order as the\n\t// `setimmediate` library.\n\texports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n\t                       (typeof global !== \"undefined\" && global.setImmediate) ||\n\t                       (this && this.setImmediate);\n\texports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n\t                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n\t                         (this && this.clearImmediate);\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global, process) {(function (global, undefined) {\n\t    \"use strict\";\n\t\n\t    if (global.setImmediate) {\n\t        return;\n\t    }\n\t\n\t    var nextHandle = 1; // Spec says greater than zero\n\t    var tasksByHandle = {};\n\t    var currentlyRunningATask = false;\n\t    var doc = global.document;\n\t    var registerImmediate;\n\t\n\t    function setImmediate(callback) {\n\t      // Callback can either be a function or a string\n\t      if (typeof callback !== \"function\") {\n\t        callback = new Function(\"\" + callback);\n\t      }\n\t      // Copy function arguments\n\t      var args = new Array(arguments.length - 1);\n\t      for (var i = 0; i < args.length; i++) {\n\t          args[i] = arguments[i + 1];\n\t      }\n\t      // Store and register the task\n\t      var task = { callback: callback, args: args };\n\t      tasksByHandle[nextHandle] = task;\n\t      registerImmediate(nextHandle);\n\t      return nextHandle++;\n\t    }\n\t\n\t    function clearImmediate(handle) {\n\t        delete tasksByHandle[handle];\n\t    }\n\t\n\t    function run(task) {\n\t        var callback = task.callback;\n\t        var args = task.args;\n\t        switch (args.length) {\n\t        case 0:\n\t            callback();\n\t            break;\n\t        case 1:\n\t            callback(args[0]);\n\t            break;\n\t        case 2:\n\t            callback(args[0], args[1]);\n\t            break;\n\t        case 3:\n\t            callback(args[0], args[1], args[2]);\n\t            break;\n\t        default:\n\t            callback.apply(undefined, args);\n\t            break;\n\t        }\n\t    }\n\t\n\t    function runIfPresent(handle) {\n\t        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n\t        // So if we're currently running a task, we'll need to delay this invocation.\n\t        if (currentlyRunningATask) {\n\t            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n\t            // \"too much recursion\" error.\n\t            setTimeout(runIfPresent, 0, handle);\n\t        } else {\n\t            var task = tasksByHandle[handle];\n\t            if (task) {\n\t                currentlyRunningATask = true;\n\t                try {\n\t                    run(task);\n\t                } finally {\n\t                    clearImmediate(handle);\n\t                    currentlyRunningATask = false;\n\t                }\n\t            }\n\t        }\n\t    }\n\t\n\t    function installNextTickImplementation() {\n\t        registerImmediate = function(handle) {\n\t            process.nextTick(function () { runIfPresent(handle); });\n\t        };\n\t    }\n\t\n\t    function canUsePostMessage() {\n\t        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n\t        // where `global.postMessage` means something completely different and can't be used for this purpose.\n\t        if (global.postMessage && !global.importScripts) {\n\t            var postMessageIsAsynchronous = true;\n\t            var oldOnMessage = global.onmessage;\n\t            global.onmessage = function() {\n\t                postMessageIsAsynchronous = false;\n\t            };\n\t            global.postMessage(\"\", \"*\");\n\t            global.onmessage = oldOnMessage;\n\t            return postMessageIsAsynchronous;\n\t        }\n\t    }\n\t\n\t    function installPostMessageImplementation() {\n\t        // Installs an event handler on `global` for the `message` event: see\n\t        // * https://developer.mozilla.org/en/DOM/window.postMessage\n\t        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\t\n\t        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n\t        var onGlobalMessage = function(event) {\n\t            if (event.source === global &&\n\t                typeof event.data === \"string\" &&\n\t                event.data.indexOf(messagePrefix) === 0) {\n\t                runIfPresent(+event.data.slice(messagePrefix.length));\n\t            }\n\t        };\n\t\n\t        if (global.addEventListener) {\n\t            global.addEventListener(\"message\", onGlobalMessage, false);\n\t        } else {\n\t            global.attachEvent(\"onmessage\", onGlobalMessage);\n\t        }\n\t\n\t        registerImmediate = function(handle) {\n\t            global.postMessage(messagePrefix + handle, \"*\");\n\t        };\n\t    }\n\t\n\t    function installMessageChannelImplementation() {\n\t        var channel = new MessageChannel();\n\t        channel.port1.onmessage = function(event) {\n\t            var handle = event.data;\n\t            runIfPresent(handle);\n\t        };\n\t\n\t        registerImmediate = function(handle) {\n\t            channel.port2.postMessage(handle);\n\t        };\n\t    }\n\t\n\t    function installReadyStateChangeImplementation() {\n\t        var html = doc.documentElement;\n\t        registerImmediate = function(handle) {\n\t            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n\t            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n\t            var script = doc.createElement(\"script\");\n\t            script.onreadystatechange = function () {\n\t                runIfPresent(handle);\n\t                script.onreadystatechange = null;\n\t                html.removeChild(script);\n\t                script = null;\n\t            };\n\t            html.appendChild(script);\n\t        };\n\t    }\n\t\n\t    function installSetTimeoutImplementation() {\n\t        registerImmediate = function(handle) {\n\t            setTimeout(runIfPresent, 0, handle);\n\t        };\n\t    }\n\t\n\t    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n\t    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n\t    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\t\n\t    // Don't get fooled by e.g. browserify environments.\n\t    if ({}.toString.call(global.process) === \"[object process]\") {\n\t        // For Node.js before 0.9\n\t        installNextTickImplementation();\n\t\n\t    } else if (canUsePostMessage()) {\n\t        // For non-IE10 modern browsers\n\t        installPostMessageImplementation();\n\t\n\t    } else if (global.MessageChannel) {\n\t        // For web workers, where supported\n\t        installMessageChannelImplementation();\n\t\n\t    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n\t        // For IE 6–8\n\t        installReadyStateChangeImplementation();\n\t\n\t    } else {\n\t        // For older browsers\n\t        installSetTimeoutImplementation();\n\t    }\n\t\n\t    attachTo.setImmediate = setImmediate;\n\t    attachTo.clearImmediate = clearImmediate;\n\t}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }()), __webpack_require__(4)))\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n\t// shim for using process in browser\n\tvar process = module.exports = {};\n\t\n\t// cached from whatever global is present so that test runners that stub it\n\t// don't break things.  But we need to wrap it in a try catch in case it is\n\t// wrapped in strict mode code which doesn't define any globals.  It's inside a\n\t// function because try/catches deoptimize in certain engines.\n\t\n\tvar cachedSetTimeout;\n\tvar cachedClearTimeout;\n\t\n\tfunction defaultSetTimout() {\n\t    throw new Error('setTimeout has not been defined');\n\t}\n\tfunction defaultClearTimeout () {\n\t    throw new Error('clearTimeout has not been defined');\n\t}\n\t(function () {\n\t    try {\n\t        if (typeof setTimeout === 'function') {\n\t            cachedSetTimeout = setTimeout;\n\t        } else {\n\t            cachedSetTimeout = defaultSetTimout;\n\t        }\n\t    } catch (e) {\n\t        cachedSetTimeout = defaultSetTimout;\n\t    }\n\t    try {\n\t        if (typeof clearTimeout === 'function') {\n\t            cachedClearTimeout = clearTimeout;\n\t        } else {\n\t            cachedClearTimeout = defaultClearTimeout;\n\t        }\n\t    } catch (e) {\n\t        cachedClearTimeout = defaultClearTimeout;\n\t    }\n\t} ())\n\tfunction runTimeout(fun) {\n\t    if (cachedSetTimeout === setTimeout) {\n\t        //normal enviroments in sane situations\n\t        return setTimeout(fun, 0);\n\t    }\n\t    // if setTimeout wasn't available but was latter defined\n\t    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n\t        cachedSetTimeout = setTimeout;\n\t        return setTimeout(fun, 0);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedSetTimeout(fun, 0);\n\t    } catch(e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n\t            return cachedSetTimeout.call(null, fun, 0);\n\t        } catch(e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n\t            return cachedSetTimeout.call(this, fun, 0);\n\t        }\n\t    }\n\t\n\t\n\t}\n\tfunction runClearTimeout(marker) {\n\t    if (cachedClearTimeout === clearTimeout) {\n\t        //normal enviroments in sane situations\n\t        return clearTimeout(marker);\n\t    }\n\t    // if clearTimeout wasn't available but was latter defined\n\t    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n\t        cachedClearTimeout = clearTimeout;\n\t        return clearTimeout(marker);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedClearTimeout(marker);\n\t    } catch (e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n\t            return cachedClearTimeout.call(null, marker);\n\t        } catch (e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n\t            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n\t            return cachedClearTimeout.call(this, marker);\n\t        }\n\t    }\n\t\n\t\n\t\n\t}\n\tvar queue = [];\n\tvar draining = false;\n\tvar currentQueue;\n\tvar queueIndex = -1;\n\t\n\tfunction cleanUpNextTick() {\n\t    if (!draining || !currentQueue) {\n\t        return;\n\t    }\n\t    draining = false;\n\t    if (currentQueue.length) {\n\t        queue = currentQueue.concat(queue);\n\t    } else {\n\t        queueIndex = -1;\n\t    }\n\t    if (queue.length) {\n\t        drainQueue();\n\t    }\n\t}\n\t\n\tfunction drainQueue() {\n\t    if (draining) {\n\t        return;\n\t    }\n\t    var timeout = runTimeout(cleanUpNextTick);\n\t    draining = true;\n\t\n\t    var len = queue.length;\n\t    while(len) {\n\t        currentQueue = queue;\n\t        queue = [];\n\t        while (++queueIndex < len) {\n\t            if (currentQueue) {\n\t                currentQueue[queueIndex].run();\n\t            }\n\t        }\n\t        queueIndex = -1;\n\t        len = queue.length;\n\t    }\n\t    currentQueue = null;\n\t    draining = false;\n\t    runClearTimeout(timeout);\n\t}\n\t\n\tprocess.nextTick = function (fun) {\n\t    var args = new Array(arguments.length - 1);\n\t    if (arguments.length > 1) {\n\t        for (var i = 1; i < arguments.length; i++) {\n\t            args[i - 1] = arguments[i];\n\t        }\n\t    }\n\t    queue.push(new Item(fun, args));\n\t    if (queue.length === 1 && !draining) {\n\t        runTimeout(drainQueue);\n\t    }\n\t};\n\t\n\t// v8 likes predictible objects\n\tfunction Item(fun, array) {\n\t    this.fun = fun;\n\t    this.array = array;\n\t}\n\tItem.prototype.run = function () {\n\t    this.fun.apply(null, this.array);\n\t};\n\tprocess.title = 'browser';\n\tprocess.browser = true;\n\tprocess.env = {};\n\tprocess.argv = [];\n\tprocess.version = ''; // empty string to avoid regexp issues\n\tprocess.versions = {};\n\t\n\tfunction noop() {}\n\t\n\tprocess.on = noop;\n\tprocess.addListener = noop;\n\tprocess.once = noop;\n\tprocess.off = noop;\n\tprocess.removeListener = noop;\n\tprocess.removeAllListeners = noop;\n\tprocess.emit = noop;\n\tprocess.prependListener = noop;\n\tprocess.prependOnceListener = noop;\n\t\n\tprocess.listeners = function (name) { return [] }\n\t\n\tprocess.binding = function (name) {\n\t    throw new Error('process.binding is not supported');\n\t};\n\t\n\tprocess.cwd = function () { return '/' };\n\tprocess.chdir = function (dir) {\n\t    throw new Error('process.chdir is not supported');\n\t};\n\tprocess.umask = function() { return 0; };\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\t//@source https://xts.so/demo/compress/index.html\r\n\t\r\n\t// 早期版本的浏览器需要用BlobBuilder来构造Blob，创建一个通用构造器来兼容早期版本\r\n\tvar BlobConstructor = ((function () {\r\n\t    try {\r\n\t        new Blob();\r\n\t        return true;\r\n\t    } catch (e) {\r\n\t        return false;\r\n\t    }\r\n\t})()) ? window.Blob : function (parts, opts) {\r\n\t    var bb = new (\r\n\t        window.BlobBuilder\r\n\t        || window.WebKitBlobBuilder\r\n\t        || window.MSBlobBuilder\r\n\t        || window.MozBlobBuilder\r\n\t    );\r\n\t    parts.forEach(function (p) {\r\n\t        bb.append(p);\r\n\t    });\r\n\t\r\n\t    return bb.getBlob(opts ? opts.type : undefined);\r\n\t};\r\n\t\r\n\t// Android上的AppleWebKit 534以前的内核存在一个Bug，\r\n\t// 导致FormData加入一个Blob对象后，上传的文件是0字节\r\n\tfunction hasFormDataBug () {\r\n\t    var bCheck = ~navigator.userAgent.indexOf('Android')\r\n\t        && ~navigator.vendor.indexOf('Google')\r\n\t        && !~navigator.userAgent.indexOf('Chrome');\r\n\t\r\n\t    // QQ X5浏览器也有这个BUG\r\n\t    return bCheck && navigator.userAgent.match(/AppleWebKit\\/(\\d+)/).pop() <= 534 || /MQQBrowser/g.test(navigator.userAgent);\r\n\t}\r\n\tvar FormDataShim=(function(){\r\n\t    var formDataShimNums = 0;\r\n\t    function FormDataShim () {\r\n\t        var\r\n\t        // Store a reference to this\r\n\t        o        = this,\r\n\t    \r\n\t        // Data to be sent\r\n\t        parts = [],\r\n\t    \r\n\t        // Boundary parameter for separating the multipart values\r\n\t        boundary = Array(21).join('-') + (+new Date() * (1e16 * Math.random())).toString(36),\r\n\t    \r\n\t        // Store the current XHR send method so we can safely override it\r\n\t        oldSend  = XMLHttpRequest.prototype.send;\r\n\t        this.getParts = function () {\r\n\t            return parts.toString();\r\n\t        };\r\n\t        this.append   = function (name, value, filename) {\r\n\t            parts.push('--' + boundary + '\\r\\nContent-Disposition: form-data; name=\"' + name + '\"');\r\n\t    \r\n\t            if (value instanceof Blob) {\r\n\t                parts.push('; filename=\"' + (filename || 'blob') + '\"\\r\\nContent-Type: ' + value.type + '\\r\\n\\r\\n');\r\n\t                parts.push(value);\r\n\t            }\r\n\t            else {\r\n\t                parts.push('\\r\\n\\r\\n' + value);\r\n\t            }\r\n\t            parts.push('\\r\\n');\r\n\t        };\r\n\t    \r\n\t        formDataShimNums++;\r\n\t        XMLHttpRequest.prototype.send = function (val) {\r\n\t            var fr,\r\n\t                data,\r\n\t                oXHR = this;\r\n\t    \r\n\t            if (val === o) {\r\n\t                // Append the final boundary string\r\n\t                parts.push('--' + boundary + '--\\r\\n');\r\n\t                // Create the blob\r\n\t                data = new BlobConstructor(parts);\r\n\t    \r\n\t                // Set up and read the blob into an array to be sent\r\n\t                fr         = new FileReader();\r\n\t                fr.onload  = function () {\r\n\t                    oldSend.call(oXHR, fr.result);\r\n\t                };\r\n\t                fr.onerror = function (err) {\r\n\t                    throw err;\r\n\t                };\r\n\t                fr.readAsArrayBuffer(data);\r\n\t    \r\n\t                // Set the multipart content type and boudary\r\n\t                this.setRequestHeader('Content-Type', 'multipart/form-data; boundary=' + boundary);\r\n\t                formDataShimNums--;\r\n\t                if(formDataShimNums == 0){\r\n\t                    XMLHttpRequest.prototype.send = oldSend;\r\n\t                }\r\n\t            }\r\n\t            else {\r\n\t                oldSend.call(this, val);\r\n\t            }\r\n\t        };\r\n\t    };\r\n\t    FormDataShim.prototype = Object.create(FormData.prototype);\r\n\t    return FormDataShim;\r\n\t})();\r\n\t\r\n\t\r\n\tmodule.exports = {\r\n\t    Blob    : BlobConstructor,\r\n\t    FormData: hasFormDataBug() ? FormDataShim : FormData\r\n\t};\r\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* exif */\r\n\t(function () {\r\n\t\r\n\t    var debug = false;\r\n\t\r\n\t    var root = this;\r\n\t\r\n\t    var EXIF = function (obj) {\r\n\t        if (obj instanceof EXIF) return obj;\r\n\t        if (!(this instanceof EXIF)) return new EXIF(obj);\r\n\t        this.EXIFwrapped = obj;\r\n\t    };\r\n\t\r\n\t    if (true) {\r\n\t        if (typeof module !== 'undefined' && module.exports) {\r\n\t            exports = module.exports = EXIF;\r\n\t        }\r\n\t        exports.EXIF = EXIF;\r\n\t    } else {\r\n\t        root.EXIF = EXIF;\r\n\t    }\r\n\t\r\n\t    var ExifTags = EXIF.Tags = {\r\n\t\r\n\t        // version tags\r\n\t        0x9000: \"ExifVersion\",             // EXIF version\r\n\t        0xA000: \"FlashpixVersion\",         // Flashpix format version\r\n\t\r\n\t        // colorspace tags\r\n\t        0xA001: \"ColorSpace\",              // Color space information tag\r\n\t\r\n\t        // image configuration\r\n\t        0xA002: \"PixelXDimension\",         // Valid width of meaningful image\r\n\t        0xA003: \"PixelYDimension\",         // Valid height of meaningful image\r\n\t        0x9101: \"ComponentsConfiguration\", // Information about channels\r\n\t        0x9102: \"CompressedBitsPerPixel\",  // Compressed bits per pixel\r\n\t\r\n\t        // user information\r\n\t        0x927C: \"MakerNote\",               // Any desired information written by the manufacturer\r\n\t        0x9286: \"UserComment\",             // Comments by user\r\n\t\r\n\t        // related file\r\n\t        0xA004: \"RelatedSoundFile\",        // Name of related sound file\r\n\t\r\n\t        // date and time\r\n\t        0x9003: \"DateTimeOriginal\",        // Date and time when the original image was generated\r\n\t        0x9004: \"DateTimeDigitized\",       // Date and time when the image was stored digitally\r\n\t        0x9290: \"SubsecTime\",              // Fractions of seconds for DateTime\r\n\t        0x9291: \"SubsecTimeOriginal\",      // Fractions of seconds for DateTimeOriginal\r\n\t        0x9292: \"SubsecTimeDigitized\",     // Fractions of seconds for DateTimeDigitized\r\n\t\r\n\t        // picture-taking conditions\r\n\t        0x829A: \"ExposureTime\",            // Exposure time (in seconds)\r\n\t        0x829D: \"FNumber\",                 // F number\r\n\t        0x8822: \"ExposureProgram\",         // Exposure program\r\n\t        0x8824: \"SpectralSensitivity\",     // Spectral sensitivity\r\n\t        0x8827: \"ISOSpeedRatings\",         // ISO speed rating\r\n\t        0x8828: \"OECF\",                    // Optoelectric conversion factor\r\n\t        0x9201: \"ShutterSpeedValue\",       // Shutter speed\r\n\t        0x9202: \"ApertureValue\",           // Lens aperture\r\n\t        0x9203: \"BrightnessValue\",         // Value of brightness\r\n\t        0x9204: \"ExposureBias\",            // Exposure bias\r\n\t        0x9205: \"MaxApertureValue\",        // Smallest F number of lens\r\n\t        0x9206: \"SubjectDistance\",         // Distance to subject in meters\r\n\t        0x9207: \"MeteringMode\",            // Metering mode\r\n\t        0x9208: \"LightSource\",             // Kind of light source\r\n\t        0x9209: \"Flash\",                   // Flash status\r\n\t        0x9214: \"SubjectArea\",             // Location and area of main subject\r\n\t        0x920A: \"FocalLength\",             // Focal length of the lens in mm\r\n\t        0xA20B: \"FlashEnergy\",             // Strobe energy in BCPS\r\n\t        0xA20C: \"SpatialFrequencyResponse\",    //\r\n\t        0xA20E: \"FocalPlaneXResolution\",   // Number of pixels in width direction per FocalPlaneResolutionUnit\r\n\t        0xA20F: \"FocalPlaneYResolution\",   // Number of pixels in height direction per FocalPlaneResolutionUnit\r\n\t        0xA210: \"FocalPlaneResolutionUnit\",    // Unit for measuring FocalPlaneXResolution and FocalPlaneYResolution\r\n\t        0xA214: \"SubjectLocation\",         // Location of subject in image\r\n\t        0xA215: \"ExposureIndex\",           // Exposure index selected on camera\r\n\t        0xA217: \"SensingMethod\",           // Image sensor type\r\n\t        0xA300: \"FileSource\",              // Image source (3 == DSC)\r\n\t        0xA301: \"SceneType\",               // Scene type (1 == directly photographed)\r\n\t        0xA302: \"CFAPattern\",              // Color filter array geometric pattern\r\n\t        0xA401: \"CustomRendered\",          // Special processing\r\n\t        0xA402: \"ExposureMode\",            // Exposure mode\r\n\t        0xA403: \"WhiteBalance\",            // 1 = auto white balance, 2 = manual\r\n\t        0xA404: \"DigitalZoomRation\",       // Digital zoom ratio\r\n\t        0xA405: \"FocalLengthIn35mmFilm\",   // Equivalent foacl length assuming 35mm film camera (in mm)\r\n\t        0xA406: \"SceneCaptureType\",        // Type of scene\r\n\t        0xA407: \"GainControl\",             // Degree of overall image gain adjustment\r\n\t        0xA408: \"Contrast\",                // Direction of contrast processing applied by camera\r\n\t        0xA409: \"Saturation\",              // Direction of saturation processing applied by camera\r\n\t        0xA40A: \"Sharpness\",               // Direction of sharpness processing applied by camera\r\n\t        0xA40B: \"DeviceSettingDescription\",    //\r\n\t        0xA40C: \"SubjectDistanceRange\",    // Distance to subject\r\n\t\r\n\t        // other tags\r\n\t        0xA005: \"InteroperabilityIFDPointer\",\r\n\t        0xA420: \"ImageUniqueID\"            // Identifier assigned uniquely to each image\r\n\t    };\r\n\t\r\n\t    var TiffTags = EXIF.TiffTags = {\r\n\t        0x0100: \"ImageWidth\",\r\n\t        0x0101: \"ImageHeight\",\r\n\t        0x8769: \"ExifIFDPointer\",\r\n\t        0x8825: \"GPSInfoIFDPointer\",\r\n\t        0xA005: \"InteroperabilityIFDPointer\",\r\n\t        0x0102: \"BitsPerSample\",\r\n\t        0x0103: \"Compression\",\r\n\t        0x0106: \"PhotometricInterpretation\",\r\n\t        0x0112: \"Orientation\",\r\n\t        0x0115: \"SamplesPerPixel\",\r\n\t        0x011C: \"PlanarConfiguration\",\r\n\t        0x0212: \"YCbCrSubSampling\",\r\n\t        0x0213: \"YCbCrPositioning\",\r\n\t        0x011A: \"XResolution\",\r\n\t        0x011B: \"YResolution\",\r\n\t        0x0128: \"ResolutionUnit\",\r\n\t        0x0111: \"StripOffsets\",\r\n\t        0x0116: \"RowsPerStrip\",\r\n\t        0x0117: \"StripByteCounts\",\r\n\t        0x0201: \"JPEGInterchangeFormat\",\r\n\t        0x0202: \"JPEGInterchangeFormatLength\",\r\n\t        0x012D: \"TransferFunction\",\r\n\t        0x013E: \"WhitePoint\",\r\n\t        0x013F: \"PrimaryChromaticities\",\r\n\t        0x0211: \"YCbCrCoefficients\",\r\n\t        0x0214: \"ReferenceBlackWhite\",\r\n\t        0x0132: \"DateTime\",\r\n\t        0x010E: \"ImageDescription\",\r\n\t        0x010F: \"Make\",\r\n\t        0x0110: \"Model\",\r\n\t        0x0131: \"Software\",\r\n\t        0x013B: \"Artist\",\r\n\t        0x8298: \"Copyright\"\r\n\t    };\r\n\t\r\n\t    var GPSTags = EXIF.GPSTags = {\r\n\t        0x0000: \"GPSVersionID\",\r\n\t        0x0001: \"GPSLatitudeRef\",\r\n\t        0x0002: \"GPSLatitude\",\r\n\t        0x0003: \"GPSLongitudeRef\",\r\n\t        0x0004: \"GPSLongitude\",\r\n\t        0x0005: \"GPSAltitudeRef\",\r\n\t        0x0006: \"GPSAltitude\",\r\n\t        0x0007: \"GPSTimeStamp\",\r\n\t        0x0008: \"GPSSatellites\",\r\n\t        0x0009: \"GPSStatus\",\r\n\t        0x000A: \"GPSMeasureMode\",\r\n\t        0x000B: \"GPSDOP\",\r\n\t        0x000C: \"GPSSpeedRef\",\r\n\t        0x000D: \"GPSSpeed\",\r\n\t        0x000E: \"GPSTrackRef\",\r\n\t        0x000F: \"GPSTrack\",\r\n\t        0x0010: \"GPSImgDirectionRef\",\r\n\t        0x0011: \"GPSImgDirection\",\r\n\t        0x0012: \"GPSMapDatum\",\r\n\t        0x0013: \"GPSDestLatitudeRef\",\r\n\t        0x0014: \"GPSDestLatitude\",\r\n\t        0x0015: \"GPSDestLongitudeRef\",\r\n\t        0x0016: \"GPSDestLongitude\",\r\n\t        0x0017: \"GPSDestBearingRef\",\r\n\t        0x0018: \"GPSDestBearing\",\r\n\t        0x0019: \"GPSDestDistanceRef\",\r\n\t        0x001A: \"GPSDestDistance\",\r\n\t        0x001B: \"GPSProcessingMethod\",\r\n\t        0x001C: \"GPSAreaInformation\",\r\n\t        0x001D: \"GPSDateStamp\",\r\n\t        0x001E: \"GPSDifferential\"\r\n\t    };\r\n\t\r\n\t    var StringValues = EXIF.StringValues = {\r\n\t        ExposureProgram     : {\r\n\t            0: \"Not defined\",\r\n\t            1: \"Manual\",\r\n\t            2: \"Normal program\",\r\n\t            3: \"Aperture priority\",\r\n\t            4: \"Shutter priority\",\r\n\t            5: \"Creative program\",\r\n\t            6: \"Action program\",\r\n\t            7: \"Portrait mode\",\r\n\t            8: \"Landscape mode\"\r\n\t        },\r\n\t        MeteringMode        : {\r\n\t            0  : \"Unknown\",\r\n\t            1  : \"Average\",\r\n\t            2  : \"CenterWeightedAverage\",\r\n\t            3  : \"Spot\",\r\n\t            4  : \"MultiSpot\",\r\n\t            5  : \"Pattern\",\r\n\t            6  : \"Partial\",\r\n\t            255: \"Other\"\r\n\t        },\r\n\t        LightSource         : {\r\n\t            0  : \"Unknown\",\r\n\t            1  : \"Daylight\",\r\n\t            2  : \"Fluorescent\",\r\n\t            3  : \"Tungsten (incandescent light)\",\r\n\t            4  : \"Flash\",\r\n\t            9  : \"Fine weather\",\r\n\t            10 : \"Cloudy weather\",\r\n\t            11 : \"Shade\",\r\n\t            12 : \"Daylight fluorescent (D 5700 - 7100K)\",\r\n\t            13 : \"Day white fluorescent (N 4600 - 5400K)\",\r\n\t            14 : \"Cool white fluorescent (W 3900 - 4500K)\",\r\n\t            15 : \"White fluorescent (WW 3200 - 3700K)\",\r\n\t            17 : \"Standard light A\",\r\n\t            18 : \"Standard light B\",\r\n\t            19 : \"Standard light C\",\r\n\t            20 : \"D55\",\r\n\t            21 : \"D65\",\r\n\t            22 : \"D75\",\r\n\t            23 : \"D50\",\r\n\t            24 : \"ISO studio tungsten\",\r\n\t            255: \"Other\"\r\n\t        },\r\n\t        Flash               : {\r\n\t            0x0000: \"Flash did not fire\",\r\n\t            0x0001: \"Flash fired\",\r\n\t            0x0005: \"Strobe return light not detected\",\r\n\t            0x0007: \"Strobe return light detected\",\r\n\t            0x0009: \"Flash fired, compulsory flash mode\",\r\n\t            0x000D: \"Flash fired, compulsory flash mode, return light not detected\",\r\n\t            0x000F: \"Flash fired, compulsory flash mode, return light detected\",\r\n\t            0x0010: \"Flash did not fire, compulsory flash mode\",\r\n\t            0x0018: \"Flash did not fire, auto mode\",\r\n\t            0x0019: \"Flash fired, auto mode\",\r\n\t            0x001D: \"Flash fired, auto mode, return light not detected\",\r\n\t            0x001F: \"Flash fired, auto mode, return light detected\",\r\n\t            0x0020: \"No flash function\",\r\n\t            0x0041: \"Flash fired, red-eye reduction mode\",\r\n\t            0x0045: \"Flash fired, red-eye reduction mode, return light not detected\",\r\n\t            0x0047: \"Flash fired, red-eye reduction mode, return light detected\",\r\n\t            0x0049: \"Flash fired, compulsory flash mode, red-eye reduction mode\",\r\n\t            0x004D: \"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected\",\r\n\t            0x004F: \"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected\",\r\n\t            0x0059: \"Flash fired, auto mode, red-eye reduction mode\",\r\n\t            0x005D: \"Flash fired, auto mode, return light not detected, red-eye reduction mode\",\r\n\t            0x005F: \"Flash fired, auto mode, return light detected, red-eye reduction mode\"\r\n\t        },\r\n\t        SensingMethod       : {\r\n\t            1: \"Not defined\",\r\n\t            2: \"One-chip color area sensor\",\r\n\t            3: \"Two-chip color area sensor\",\r\n\t            4: \"Three-chip color area sensor\",\r\n\t            5: \"Color sequential area sensor\",\r\n\t            7: \"Trilinear sensor\",\r\n\t            8: \"Color sequential linear sensor\"\r\n\t        },\r\n\t        SceneCaptureType    : {\r\n\t            0: \"Standard\",\r\n\t            1: \"Landscape\",\r\n\t            2: \"Portrait\",\r\n\t            3: \"Night scene\"\r\n\t        },\r\n\t        SceneType           : {\r\n\t            1: \"Directly photographed\"\r\n\t        },\r\n\t        CustomRendered      : {\r\n\t            0: \"Normal process\",\r\n\t            1: \"Custom process\"\r\n\t        },\r\n\t        WhiteBalance        : {\r\n\t            0: \"Auto white balance\",\r\n\t            1: \"Manual white balance\"\r\n\t        },\r\n\t        GainControl         : {\r\n\t            0: \"None\",\r\n\t            1: \"Low gain up\",\r\n\t            2: \"High gain up\",\r\n\t            3: \"Low gain down\",\r\n\t            4: \"High gain down\"\r\n\t        },\r\n\t        Contrast            : {\r\n\t            0: \"Normal\",\r\n\t            1: \"Soft\",\r\n\t            2: \"Hard\"\r\n\t        },\r\n\t        Saturation          : {\r\n\t            0: \"Normal\",\r\n\t            1: \"Low saturation\",\r\n\t            2: \"High saturation\"\r\n\t        },\r\n\t        Sharpness           : {\r\n\t            0: \"Normal\",\r\n\t            1: \"Soft\",\r\n\t            2: \"Hard\"\r\n\t        },\r\n\t        SubjectDistanceRange: {\r\n\t            0: \"Unknown\",\r\n\t            1: \"Macro\",\r\n\t            2: \"Close view\",\r\n\t            3: \"Distant view\"\r\n\t        },\r\n\t        FileSource          : {\r\n\t            3: \"DSC\"\r\n\t        },\r\n\t\r\n\t        Components: {\r\n\t            0: \"\",\r\n\t            1: \"Y\",\r\n\t            2: \"Cb\",\r\n\t            3: \"Cr\",\r\n\t            4: \"R\",\r\n\t            5: \"G\",\r\n\t            6: \"B\"\r\n\t        }\r\n\t    };\r\n\t\r\n\t    function addEvent (element, event, handler) {\r\n\t        if (element.addEventListener) {\r\n\t            element.addEventListener(event, handler, false);\r\n\t        } else if (element.attachEvent) {\r\n\t            element.attachEvent(\"on\" + event, handler);\r\n\t        }\r\n\t    }\r\n\t\r\n\t    function imageHasData (img) {\r\n\t        return !!(img.exifdata);\r\n\t    }\r\n\t\r\n\t\r\n\t    function base64ToArrayBuffer (base64, contentType) {\r\n\t        contentType = contentType || base64.match(/^data\\:([^\\;]+)\\;base64,/mi)[1] || ''; // e.g. 'data:image/jpeg;base64,...' => 'image/jpeg'\r\n\t        base64     = base64.replace(/^data\\:([^\\;]+)\\;base64,/gmi, '');\r\n\t        var binary = atob(base64);\r\n\t        var len    = binary.length;\r\n\t        var buffer = new ArrayBuffer(len);\r\n\t        var view   = new Uint8Array(buffer);\r\n\t        for (var i = 0; i < len; i++) {\r\n\t            view[i] = binary.charCodeAt(i);\r\n\t        }\r\n\t        return buffer;\r\n\t    }\r\n\t\r\n\t    function objectURLToBlob (url, callback) {\r\n\t        var http          = new XMLHttpRequest();\r\n\t        http.open(\"GET\", url, true);\r\n\t        http.responseType = \"blob\";\r\n\t        http.onload       = function (e) {\r\n\t            if (this.status == 200 || this.status === 0) {\r\n\t                callback(this.response);\r\n\t            }\r\n\t        };\r\n\t        http.send();\r\n\t    }\r\n\t\r\n\t    function getImageData (img, callback) {\r\n\t        function handleBinaryFile (binFile) {\r\n\t            // var data     = findEXIFinJPEG(binFile);\r\n\t            // var iptcdata = findIPTCinJPEG(binFile);\r\n\t            var data,iptcdata;\r\n\t            img.exifdata = data || {};\r\n\t            img.iptcdata = iptcdata || {};\r\n\t            if (callback) {\r\n\t                callback.call(img);\r\n\t            }\r\n\t        }\r\n\t\r\n\t        if (img.src) {\r\n\t            if (/^data\\:/i.test(img.src)) { // Data URI\r\n\t                var arrayBuffer = base64ToArrayBuffer(img.src);\r\n\t                handleBinaryFile(arrayBuffer);\r\n\t\r\n\t            } else if (/^blob\\:/i.test(img.src)) { // Object URL\r\n\t                var fileReader    = new FileReader();\r\n\t                fileReader.onload = function (e) {\r\n\t                    handleBinaryFile(e.target.result);\r\n\t                };\r\n\t                objectURLToBlob(img.src, function (blob) {\r\n\t                    fileReader.readAsArrayBuffer(blob);\r\n\t                });\r\n\t            } else {\r\n\t                var http          = new XMLHttpRequest();\r\n\t                http.onload       = function () {\r\n\t                    if (this.status == 200 || this.status === 0) {\r\n\t                        handleBinaryFile(http.response);\r\n\t                    } else {\r\n\t                        callback(new Error(\"Could not load image\"));\r\n\t                    }\r\n\t                    http = null;\r\n\t                };\r\n\t                http.open(\"GET\", img.src, true);\r\n\t                http.responseType = \"arraybuffer\";\r\n\t                http.send(null);\r\n\t            }\r\n\t        } else if (window.FileReader && (img instanceof window.Blob || img instanceof window.File)) {\r\n\t            var fileReader    = new FileReader();\r\n\t            fileReader.onload = function (e) {\r\n\t                if (debug) console.log(\"Got file of length \" + e.target.result.byteLength);\r\n\t                handleBinaryFile(e.target.result);\r\n\t            };\r\n\t\r\n\t            fileReader.readAsArrayBuffer(img);\r\n\t        }\r\n\t    }\r\n\t\r\n\t    function findEXIFinJPEG (file) {\r\n\t        var dataView = new DataView(file);\r\n\t\r\n\t        if (debug) console.log(\"Got file of length \" + file.byteLength);\r\n\t        if ((dataView.getUint8(0) != 0xFF) || (dataView.getUint8(1) != 0xD8)) {\r\n\t            if (debug) console.log(\"Not a valid JPEG\");\r\n\t            return false; // not a valid jpeg\r\n\t        }\r\n\t\r\n\t        var offset = 2,\r\n\t            length = file.byteLength,\r\n\t            marker;\r\n\t\r\n\t        while (offset < length) {\r\n\t            if (dataView.getUint8(offset) != 0xFF) {\r\n\t                if (debug) console.log(\"Not a valid marker at offset \" + offset + \", found: \" + dataView.getUint8(offset));\r\n\t                return false; // not a valid marker, something is wrong\r\n\t            }\r\n\t\r\n\t            marker = dataView.getUint8(offset + 1);\r\n\t            if (debug) console.log(marker);\r\n\t\r\n\t            // we could implement handling for other markers here,\r\n\t            // but we're only looking for 0xFFE1 for EXIF data\r\n\t\r\n\t            if (marker == 225) {\r\n\t                if (debug) console.log(\"Found 0xFFE1 marker\");\r\n\t\r\n\t                return readEXIFData(dataView, offset + 4, dataView.getUint16(offset + 2) - 2);\r\n\t\r\n\t                // offset += 2 + file.getShortAt(offset+2, true);\r\n\t\r\n\t            } else {\r\n\t                offset += 2 + dataView.getUint16(offset + 2);\r\n\t            }\r\n\t\r\n\t        }\r\n\t\r\n\t    }\r\n\t\r\n\t    function findIPTCinJPEG (file) {\r\n\t        var dataView = new DataView(file);\r\n\t\r\n\t        if (debug) console.log(\"Got file of length \" + file.byteLength);\r\n\t        if ((dataView.getUint8(0) != 0xFF) || (dataView.getUint8(1) != 0xD8)) {\r\n\t            if (debug) console.log(\"Not a valid JPEG\");\r\n\t            return false; // not a valid jpeg\r\n\t        }\r\n\t\r\n\t        var offset = 2,\r\n\t            length = file.byteLength;\r\n\t\r\n\t\r\n\t        var isFieldSegmentStart = function (dataView, offset) {\r\n\t            return (\r\n\t                dataView.getUint8(offset) === 0x38 &&\r\n\t                dataView.getUint8(offset + 1) === 0x42 &&\r\n\t                dataView.getUint8(offset + 2) === 0x49 &&\r\n\t                dataView.getUint8(offset + 3) === 0x4D &&\r\n\t                dataView.getUint8(offset + 4) === 0x04 &&\r\n\t                dataView.getUint8(offset + 5) === 0x04\r\n\t            );\r\n\t        };\r\n\t\r\n\t        while (offset < length) {\r\n\t\r\n\t            if (isFieldSegmentStart(dataView, offset)) {\r\n\t\r\n\t                // Get the length of the name header (which is padded to an even number of bytes)\r\n\t                var nameHeaderLength = dataView.getUint8(offset + 7);\r\n\t                if (nameHeaderLength % 2 !== 0) nameHeaderLength += 1;\r\n\t                // Check for pre photoshop 6 format\r\n\t                if (nameHeaderLength === 0) {\r\n\t                    // Always 4\r\n\t                    nameHeaderLength = 4;\r\n\t                }\r\n\t\r\n\t                var startOffset   = offset + 8 + nameHeaderLength;\r\n\t                var sectionLength = dataView.getUint16(offset + 6 + nameHeaderLength);\r\n\t\r\n\t                return readIPTCData(file, startOffset, sectionLength);\r\n\t\r\n\t                break;\r\n\t\r\n\t            }\r\n\t\r\n\t\r\n\t            // Not the marker, continue searching\r\n\t            offset++;\r\n\t\r\n\t        }\r\n\t\r\n\t    }\r\n\t\r\n\t    var IptcFieldMap = {\r\n\t        0x78: 'caption',\r\n\t        0x6E: 'credit',\r\n\t        0x19: 'keywords',\r\n\t        0x37: 'dateCreated',\r\n\t        0x50: 'byline',\r\n\t        0x55: 'bylineTitle',\r\n\t        0x7A: 'captionWriter',\r\n\t        0x69: 'headline',\r\n\t        0x74: 'copyright',\r\n\t        0x0F: 'category'\r\n\t    };\r\n\t\r\n\t    function readIPTCData (file, startOffset, sectionLength) {\r\n\t        var dataView        = new DataView(file);\r\n\t        var data            = {};\r\n\t        var fieldValue, fieldName, dataSize, segmentType, segmentSize;\r\n\t        var segmentStartPos = startOffset;\r\n\t        while (segmentStartPos < startOffset + sectionLength) {\r\n\t            if (dataView.getUint8(segmentStartPos) === 0x1C && dataView.getUint8(segmentStartPos + 1) === 0x02) {\r\n\t                segmentType = dataView.getUint8(segmentStartPos + 2);\r\n\t                if (segmentType in IptcFieldMap) {\r\n\t                    dataSize    = dataView.getInt16(segmentStartPos + 3);\r\n\t                    segmentSize = dataSize + 5;\r\n\t                    fieldName   = IptcFieldMap[segmentType];\r\n\t                    fieldValue  = getStringFromDB(dataView, segmentStartPos + 5, dataSize);\r\n\t                    // Check if we already stored a value with this name\r\n\t                    if (data.hasOwnProperty(fieldName)) {\r\n\t                        // Value already stored with this name, create multivalue field\r\n\t                        if (data[fieldName] instanceof Array) {\r\n\t                            data[fieldName].push(fieldValue);\r\n\t                        }\r\n\t                        else {\r\n\t                            data[fieldName] = [data[fieldName], fieldValue];\r\n\t                        }\r\n\t                    }\r\n\t                    else {\r\n\t                        data[fieldName] = fieldValue;\r\n\t                    }\r\n\t                }\r\n\t\r\n\t            }\r\n\t            segmentStartPos++;\r\n\t        }\r\n\t        return data;\r\n\t    }\r\n\t\r\n\t\r\n\t    function readTags (file, tiffStart, dirStart, strings, bigEnd) {\r\n\t        var entries = file.getUint16(dirStart, !bigEnd),\r\n\t            tags    = {},\r\n\t            entryOffset, tag,\r\n\t            i;\r\n\t\r\n\t        for (i = 0; i < entries; i++) {\r\n\t            entryOffset = dirStart + i * 12 + 2;\r\n\t            tag         = strings[file.getUint16(entryOffset, !bigEnd)];\r\n\t            if (!tag && debug) console.log(\"Unknown tag: \" + file.getUint16(entryOffset, !bigEnd));\r\n\t            tags[tag] = readTagValue(file, entryOffset, tiffStart, dirStart, bigEnd);\r\n\t        }\r\n\t        return tags;\r\n\t    }\r\n\t\r\n\t\r\n\t    function readTagValue (file, entryOffset, tiffStart, dirStart, bigEnd) {\r\n\t        var type        = file.getUint16(entryOffset + 2, !bigEnd),\r\n\t            numValues   = file.getUint32(entryOffset + 4, !bigEnd),\r\n\t            valueOffset = file.getUint32(entryOffset + 8, !bigEnd) + tiffStart,\r\n\t            offset,\r\n\t            vals, val, n,\r\n\t            numerator, denominator;\r\n\t\r\n\t        switch (type) {\r\n\t            case 1: // byte, 8-bit unsigned int\r\n\t            case 7: // undefined, 8-bit byte, value depending on field\r\n\t                if (numValues == 1) {\r\n\t                    return file.getUint8(entryOffset + 8, !bigEnd);\r\n\t                } else {\r\n\t                    offset = numValues > 4 ? valueOffset : (entryOffset + 8);\r\n\t                    vals   = [];\r\n\t                    for (n = 0; n < numValues; n++) {\r\n\t                        vals[n] = file.getUint8(offset + n);\r\n\t                    }\r\n\t                    return vals;\r\n\t                }\r\n\t\r\n\t            case 2: // ascii, 8-bit byte\r\n\t                offset = numValues > 4 ? valueOffset : (entryOffset + 8);\r\n\t                return getStringFromDB(file, offset, numValues - 1);\r\n\t\r\n\t            case 3: // short, 16 bit int\r\n\t                if (numValues == 1) {\r\n\t                    return file.getUint16(entryOffset + 8, !bigEnd);\r\n\t                } else {\r\n\t                    offset = numValues > 2 ? valueOffset : (entryOffset + 8);\r\n\t                    vals   = [];\r\n\t                    for (n = 0; n < numValues; n++) {\r\n\t                        vals[n] = file.getUint16(offset + 2 * n, !bigEnd);\r\n\t                    }\r\n\t                    return vals;\r\n\t                }\r\n\t\r\n\t            case 4: // long, 32 bit int\r\n\t                if (numValues == 1) {\r\n\t                    return file.getUint32(entryOffset + 8, !bigEnd);\r\n\t                } else {\r\n\t                    vals = [];\r\n\t                    for (n = 0; n < numValues; n++) {\r\n\t                        vals[n] = file.getUint32(valueOffset + 4 * n, !bigEnd);\r\n\t                    }\r\n\t                    return vals;\r\n\t                }\r\n\t\r\n\t            case 5:    // rational = two long values, first is numerator, second is denominator\r\n\t                if (numValues == 1) {\r\n\t                    numerator       = file.getUint32(valueOffset, !bigEnd);\r\n\t                    denominator     = file.getUint32(valueOffset + 4, !bigEnd);\r\n\t                    val             = new Number(numerator / denominator);\r\n\t                    val.numerator   = numerator;\r\n\t                    val.denominator = denominator;\r\n\t                    return val;\r\n\t                } else {\r\n\t                    vals = [];\r\n\t                    for (n = 0; n < numValues; n++) {\r\n\t                        numerator           = file.getUint32(valueOffset + 8 * n, !bigEnd);\r\n\t                        denominator         = file.getUint32(valueOffset + 4 + 8 * n, !bigEnd);\r\n\t                        vals[n]             = new Number(numerator / denominator);\r\n\t                        vals[n].numerator   = numerator;\r\n\t                        vals[n].denominator = denominator;\r\n\t                    }\r\n\t                    return vals;\r\n\t                }\r\n\t\r\n\t            case 9: // slong, 32 bit signed int\r\n\t                if (numValues == 1) {\r\n\t                    return file.getInt32(entryOffset + 8, !bigEnd);\r\n\t                } else {\r\n\t                    vals = [];\r\n\t                    for (n = 0; n < numValues; n++) {\r\n\t                        vals[n] = file.getInt32(valueOffset + 4 * n, !bigEnd);\r\n\t                    }\r\n\t                    return vals;\r\n\t                }\r\n\t\r\n\t            case 10: // signed rational, two slongs, first is numerator, second is denominator\r\n\t                if (numValues == 1) {\r\n\t                    return file.getInt32(valueOffset, !bigEnd) / file.getInt32(valueOffset + 4, !bigEnd);\r\n\t                } else {\r\n\t                    vals = [];\r\n\t                    for (n = 0; n < numValues; n++) {\r\n\t                        vals[n] = file.getInt32(valueOffset + 8 * n, !bigEnd) / file.getInt32(valueOffset + 4 + 8 * n, !bigEnd);\r\n\t                    }\r\n\t                    return vals;\r\n\t                }\r\n\t        }\r\n\t    }\r\n\t\r\n\t    function getStringFromDB (buffer, start, length) {\r\n\t        var outstr = \"\", n;\r\n\t        for (n = start; n < start + length; n++) {\r\n\t            outstr += String.fromCharCode(buffer.getUint8(n));\r\n\t        }\r\n\t        return outstr;\r\n\t    }\r\n\t\r\n\t    function readEXIFData (file, start) {\r\n\t        if (getStringFromDB(file, start, 4) != \"Exif\") {\r\n\t            if (debug) console.log(\"Not valid EXIF data! \" + getStringFromDB(file, start, 4));\r\n\t            return false;\r\n\t        }\r\n\t\r\n\t        var bigEnd,\r\n\t            tags, tag,\r\n\t            exifData, gpsData,\r\n\t            tiffOffset = start + 6;\r\n\t\r\n\t        // test for TIFF validity and endianness\r\n\t        if (file.getUint16(tiffOffset) == 0x4949) {\r\n\t            bigEnd = false;\r\n\t        } else if (file.getUint16(tiffOffset) == 0x4D4D) {\r\n\t            bigEnd = true;\r\n\t        } else {\r\n\t            if (debug) console.log(\"Not valid TIFF data! (no 0x4949 or 0x4D4D)\");\r\n\t            return false;\r\n\t        }\r\n\t\r\n\t        if (file.getUint16(tiffOffset + 2, !bigEnd) != 0x002A) {\r\n\t            if (debug) console.log(\"Not valid TIFF data! (no 0x002A)\");\r\n\t            return false;\r\n\t        }\r\n\t\r\n\t        var firstIFDOffset = file.getUint32(tiffOffset + 4, !bigEnd);\r\n\t\r\n\t        if (firstIFDOffset < 0x00000008) {\r\n\t            if (debug) console.log(\"Not valid TIFF data! (First offset less than 8)\", file.getUint32(tiffOffset + 4, !bigEnd));\r\n\t            return false;\r\n\t        }\r\n\t\r\n\t        tags = readTags(file, tiffOffset, tiffOffset + firstIFDOffset, TiffTags, bigEnd);\r\n\t\r\n\t        if (tags.ExifIFDPointer) {\r\n\t            exifData = readTags(file, tiffOffset, tiffOffset + tags.ExifIFDPointer, ExifTags, bigEnd);\r\n\t            for (tag in exifData) {\r\n\t                switch (tag) {\r\n\t                    case \"LightSource\" :\r\n\t                    case \"Flash\" :\r\n\t                    case \"MeteringMode\" :\r\n\t                    case \"ExposureProgram\" :\r\n\t                    case \"SensingMethod\" :\r\n\t                    case \"SceneCaptureType\" :\r\n\t                    case \"SceneType\" :\r\n\t                    case \"CustomRendered\" :\r\n\t                    case \"WhiteBalance\" :\r\n\t                    case \"GainControl\" :\r\n\t                    case \"Contrast\" :\r\n\t                    case \"Saturation\" :\r\n\t                    case \"Sharpness\" :\r\n\t                    case \"SubjectDistanceRange\" :\r\n\t                    case \"FileSource\" :\r\n\t                        exifData[tag] = StringValues[tag][exifData[tag]];\r\n\t                        break;\r\n\t\r\n\t                    case \"ExifVersion\" :\r\n\t                    case \"FlashpixVersion\" :\r\n\t                        exifData[tag] = String.fromCharCode(exifData[tag][0], exifData[tag][1], exifData[tag][2], exifData[tag][3]);\r\n\t                        break;\r\n\t\r\n\t                    case \"ComponentsConfiguration\" :\r\n\t                        exifData[tag] =\r\n\t                            StringValues.Components[exifData[tag][0]] +\r\n\t                            StringValues.Components[exifData[tag][1]] +\r\n\t                            StringValues.Components[exifData[tag][2]] +\r\n\t                            StringValues.Components[exifData[tag][3]];\r\n\t                        break;\r\n\t                }\r\n\t                tags[tag] = exifData[tag];\r\n\t            }\r\n\t        }\r\n\t\r\n\t        if (tags.GPSInfoIFDPointer) {\r\n\t            gpsData = readTags(file, tiffOffset, tiffOffset + tags.GPSInfoIFDPointer, GPSTags, bigEnd);\r\n\t            for (tag in gpsData) {\r\n\t                switch (tag) {\r\n\t                    case \"GPSVersionID\" :\r\n\t                        gpsData[tag] = gpsData[tag][0] +\r\n\t                            \".\" + gpsData[tag][1] +\r\n\t                            \".\" + gpsData[tag][2] +\r\n\t                            \".\" + gpsData[tag][3];\r\n\t                        break;\r\n\t                }\r\n\t                tags[tag] = gpsData[tag];\r\n\t            }\r\n\t        }\r\n\t\r\n\t        return tags;\r\n\t    }\r\n\t\r\n\t    EXIF.getData = function (img, callback) {\r\n\t        if ((img instanceof Image || img instanceof HTMLImageElement) && !img.complete) return false;\r\n\t\r\n\t        if (!imageHasData(img)) {\r\n\t            getImageData(img, callback);\r\n\t        } else {\r\n\t            if (callback) {\r\n\t                callback.call(img);\r\n\t            }\r\n\t        }\r\n\t        return true;\r\n\t    }\r\n\t\r\n\t    EXIF.getTag = function (img, tag) {\r\n\t        if (!imageHasData(img)) return;\r\n\t        return img.exifdata[tag];\r\n\t    }\r\n\t\r\n\t    EXIF.getAllTags = function (img) {\r\n\t        if (!imageHasData(img)) return {};\r\n\t        var a,\r\n\t            data = img.exifdata,\r\n\t            tags = {};\r\n\t        for (a in data) {\r\n\t            if (data.hasOwnProperty(a)) {\r\n\t                tags[a] = data[a];\r\n\t            }\r\n\t        }\r\n\t        return tags;\r\n\t    }\r\n\t\r\n\t    EXIF.pretty = function (img) {\r\n\t        if (!imageHasData(img)) return \"\";\r\n\t        var a,\r\n\t            data      = img.exifdata,\r\n\t            strPretty = \"\";\r\n\t        for (a in data) {\r\n\t            if (data.hasOwnProperty(a)) {\r\n\t                if (typeof data[a] == \"object\") {\r\n\t                    if (data[a] instanceof Number) {\r\n\t                        strPretty += a + \" : \" + data[a] + \" [\" + data[a].numerator + \"/\" + data[a].denominator + \"]\\r\\n\";\r\n\t                    } else {\r\n\t                        strPretty += a + \" : [\" + data[a].length + \" values]\\r\\n\";\r\n\t                    }\r\n\t                } else {\r\n\t                    strPretty += a + \" : \" + data[a] + \"\\r\\n\";\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t        return strPretty;\r\n\t    }\r\n\t\r\n\t    EXIF.readFromBinaryFile = function (file) {\r\n\t        return findEXIFinJPEG(file);\r\n\t    }\r\n\t\r\n\t    if (true) {\r\n\t        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function () {\r\n\t            return EXIF;\r\n\t        }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n\t    }\r\n\t}.call(this));\n\n/***/ })\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// lrz.bundle.js"," \t// install a JSONP callback for chunk loading\n \tvar parentJsonpFunction = window[\"webpackJsonp\"];\n \twindow[\"webpackJsonp\"] = function webpackJsonpCallback(chunkIds, moreModules) {\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, callbacks = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId])\n \t\t\t\tcallbacks.push.apply(callbacks, installedChunks[chunkId]);\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules);\n \t\twhile(callbacks.length)\n \t\t\tcallbacks.shift().call(null, __webpack_require__);\n\n \t};\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// \"0\" means \"already loaded\"\n \t// Array means \"loading\", array contains callbacks\n \tvar installedChunks = {\n \t\t0:0\n \t};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId, callback) {\n \t\t// \"0\" is the signal for \"already loaded\"\n \t\tif(installedChunks[chunkId] === 0)\n \t\t\treturn callback.call(null, __webpack_require__);\n\n \t\t// an array means \"currently loading\".\n \t\tif(installedChunks[chunkId] !== undefined) {\n \t\t\tinstalledChunks[chunkId].push(callback);\n \t\t} else {\n \t\t\t// start chunk loading\n \t\t\tinstalledChunks[chunkId] = [callback];\n \t\t\tvar head = document.getElementsByTagName('head')[0];\n \t\t\tvar script = document.createElement('script');\n \t\t\tscript.type = 'text/javascript';\n \t\t\tscript.charset = 'utf-8';\n \t\t\tscript.async = true;\n\n \t\t\tscript.src = __webpack_require__.p + \"\" + ({}[chunkId]||chunkId) + \".chunk.js\";\n \t\t\thead.appendChild(script);\n \t\t}\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4363dd52ac95f9e897ed","// 保证按需加载的文件路径正确\r\n__webpack_public_path__ = getJsDir('lrz') + '/';\r\nwindow.URL              = window.URL || window.webkitURL;\r\n\r\nvar Promise          = require('Promise'),\r\n    BlobFormDataShim = require('Blob.FormData.shim'),\r\n    exif             = require('exif');\r\n\r\n\r\nvar UA = (function (userAgent) {\r\n    var ISOldIOS     = /OS (\\d)_.* like Mac OS X/g.exec(userAgent),\r\n        isOldAndroid = /Android (\\d.*?);/g.exec(userAgent) || /Android\\/(\\d.*?) /g.exec(userAgent);\r\n\r\n    // 判断设备是否是IOS7以下\r\n    // 判断设备是否是android4.5以下\r\n    // 判断是否iOS\r\n    // 判断是否android\r\n    // 判断是否QQ浏览器\r\n    return {\r\n        oldIOS    : ISOldIOS ? +ISOldIOS.pop() < 8 : false,\r\n        oldAndroid: isOldAndroid ? +isOldAndroid.pop().substr(0, 3) < 4.5 : false,\r\n        iOS       : /\\(i[^;]+;( U;)? CPU.+Mac OS X/.test(userAgent),\r\n        android   : /Android/g.test(userAgent),\r\n        mQQBrowser: /MQQBrowser/g.test(userAgent)\r\n    }\r\n})(navigator.userAgent);\r\n\r\n\r\nfunction Lrz (file, opts) {\r\n    var that = this;\r\n\r\n    if (!file) throw new Error('没有收到图片，可能的解决方案：https://github.com/think2011/localResizeIMG/issues/7');\r\n\r\n    opts = opts || {};\r\n\r\n    that.defaults = {\r\n        width    : null,\r\n        height   : null,\r\n        fieldName: 'file',\r\n        quality  : 0.7\r\n    };\r\n\r\n    that.file = file;\r\n\r\n    for (var p in opts) {\r\n        if (!opts.hasOwnProperty(p)) continue;\r\n        that.defaults[p] = opts[p];\r\n    }\r\n\r\n    return this.init();\r\n}\r\n\r\nLrz.prototype.init = function () {\r\n    var that         = this,\r\n        file         = that.file,\r\n        fileIsString = typeof file === 'string',\r\n        fileIsBase64 = /^data:/.test(file),\r\n        img          = new Image(),\r\n        canvas       = document.createElement('canvas'),\r\n        blob         = fileIsString ? file : URL.createObjectURL(file);\r\n\r\n    that.img    = img;\r\n    that.blob   = blob;\r\n    that.canvas = canvas;\r\n\r\n    if (fileIsString) {\r\n        that.fileName = fileIsBase64 ? 'base64.jpg' : (file.split('/').pop());\r\n    } else {\r\n        that.fileName = file.name;\r\n    }\r\n\r\n    if (!document.createElement('canvas').getContext) {\r\n        throw new Error('浏览器不支持canvas');\r\n    }\r\n\r\n    return new Promise(function (resolve, reject) {\r\n        img.onerror = function () {\r\n            var err = new Error('加载图片文件失败');\r\n            reject(err);\r\n            throw err;\r\n        };\r\n\r\n        img.onload = function () {\r\n            that._getBase64()\r\n                .then(function (base64) {\r\n                    if (base64.length < 10) {\r\n                        var err = new Error('生成base64失败');\r\n                        reject(err);\r\n                        throw err;\r\n                    }\r\n\r\n                    return base64;\r\n                })\r\n                .then(function (base64) {\r\n                    var formData = null;\r\n\r\n                    // 压缩文件太大就采用源文件,且使用原生的FormData() @source #55\r\n                    if (typeof that.file === 'object' && base64.length > that.file.size) {\r\n                        formData = new FormData();\r\n                        file     = that.file;\r\n                    } else {\r\n                        formData = new BlobFormDataShim.FormData();\r\n                        file     = dataURItoBlob(base64);\r\n                    }\r\n\r\n                    formData.append(that.defaults.fieldName, file, (that.fileName.replace(/\\..+/g, '.jpg')));\r\n\r\n                    resolve({\r\n                        formData : formData,\r\n                        fileLen : +file.size,\r\n                        base64  : base64,\r\n                        base64Len: base64.length,\r\n                        origin   : that.file,\r\n                        file   : file\r\n                    });\r\n\r\n                    // 释放内存\r\n                    for (var p in that) {\r\n                        if (!that.hasOwnProperty(p)) continue;\r\n\r\n                        that[p] = null;\r\n                    }\r\n                    URL.revokeObjectURL(that.blob);\r\n                });\r\n        };\r\n\r\n        // 如果传入的是base64在移动端会报错\r\n        !fileIsBase64 && (img.crossOrigin = \"*\");\r\n\r\n        img.src = blob;\r\n    });\r\n};\r\n\r\nLrz.prototype._getBase64 = function () {\r\n    var that   = this,\r\n        img    = that.img,\r\n        file   = that.file,\r\n        canvas = that.canvas;\r\n\r\n    return new Promise(function (resolve) {\r\n        try {\r\n            // 传入blob在android4.3以下有bug\r\n            exif.getData(typeof file === 'object' ? file : img, function () {\r\n                that.orientation = exif.getTag(this, \"Orientation\");\r\n\r\n                that.resize = that._getResize();\r\n                that.ctx    = canvas.getContext('2d');\r\n\r\n                canvas.width  = that.resize.width;\r\n                canvas.height = that.resize.height;\r\n\r\n                // 设置为白色背景，jpg是不支持透明的，所以会被默认为canvas默认的黑色背景。\r\n                that.ctx.fillStyle = '#fff';\r\n                that.ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n                // 根据设备对应处理方式\r\n                if (UA.oldIOS) {\r\n                    that._createBase64ForOldIOS().then(resolve);\r\n                }\r\n                else {\r\n                    that._createBase64().then(resolve);\r\n                }\r\n            });\r\n        } catch (err) {\r\n            // 这样能解决低内存设备闪退的问题吗？\r\n            throw new Error(err);\r\n        }\r\n    });\r\n};\r\n\r\n\r\nLrz.prototype._createBase64ForOldIOS = function () {\r\n    var that        = this,\r\n        img         = that.img,\r\n        canvas      = that.canvas,\r\n        defaults    = that.defaults,\r\n        orientation = that.orientation;\r\n\r\n    return new Promise(function (resolve) {\r\n        require(['megapix-image'], function (MegaPixImage) {\r\n            var mpImg = new MegaPixImage(img);\r\n\r\n            if (\"5678\".indexOf(orientation) > -1) {\r\n                mpImg.render(canvas, {\r\n                    width      : canvas.height,\r\n                    height     : canvas.width,\r\n                    orientation: orientation\r\n                });\r\n            } else {\r\n                mpImg.render(canvas, {\r\n                    width      : canvas.width,\r\n                    height     : canvas.height,\r\n                    orientation: orientation\r\n                });\r\n            }\r\n\r\n            resolve(canvas.toDataURL('image/jpeg', defaults.quality));\r\n        });\r\n    });\r\n};\r\n\r\nLrz.prototype._createBase64 = function () {\r\n    var that        = this,\r\n        resize      = that.resize,\r\n        img         = that.img,\r\n        canvas      = that.canvas,\r\n        ctx         = that.ctx,\r\n        defaults    = that.defaults,\r\n        orientation = that.orientation;\r\n\r\n    // 调整为正确方向\r\n    switch (orientation) {\r\n        case 3:\r\n            ctx.rotate(180 * Math.PI / 180);\r\n            ctx.drawImage(img, -resize.width, -resize.height, resize.width, resize.height);\r\n            break;\r\n        case 6:\r\n            ctx.rotate(90 * Math.PI / 180);\r\n            ctx.drawImage(img, 0, -resize.width, resize.height, resize.width);\r\n            break;\r\n        case 8:\r\n            ctx.rotate(270 * Math.PI / 180);\r\n            ctx.drawImage(img, -resize.height, 0, resize.height, resize.width);\r\n            break;\r\n\r\n        case 2:\r\n            ctx.translate(resize.width, 0);\r\n            ctx.scale(-1, 1);\r\n            ctx.drawImage(img, 0, 0, resize.width, resize.height);\r\n            break;\r\n        case 4:\r\n            ctx.translate(resize.width, 0);\r\n            ctx.scale(-1, 1);\r\n            ctx.rotate(180 * Math.PI / 180);\r\n            ctx.drawImage(img, -resize.width, -resize.height, resize.width, resize.height);\r\n            break;\r\n        case 5:\r\n            ctx.translate(resize.width, 0);\r\n            ctx.scale(-1, 1);\r\n            ctx.rotate(90 * Math.PI / 180);\r\n            ctx.drawImage(img, 0, -resize.width, resize.height, resize.width);\r\n            break;\r\n        case 7:\r\n            ctx.translate(resize.width, 0);\r\n            ctx.scale(-1, 1);\r\n            ctx.rotate(270 * Math.PI / 180);\r\n            ctx.drawImage(img, -resize.height, 0, resize.height, resize.width);\r\n            break;\r\n\r\n        default:\r\n            ctx.drawImage(img, 0, 0, resize.width, resize.height);\r\n    }\r\n\r\n    return new Promise(function (resolve) {\r\n        if (UA.oldAndroid || UA.mQQBrowser || !navigator.userAgent) {\r\n            require(['jpeg_encoder_basic'], function (JPEGEncoder) {\r\n                var encoder = new JPEGEncoder(),\r\n                    img     = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n\r\n                resolve(encoder.encode(img, defaults.quality * 100));\r\n            })\r\n        }\r\n        else {\r\n            resolve(canvas.toDataURL('image/jpeg', defaults.quality));\r\n        }\r\n    });\r\n};\r\n\r\nLrz.prototype._getResize = function () {\r\n    var that        = this,\r\n        img         = that.img,\r\n        defaults    = that.defaults,\r\n        width       = defaults.width,\r\n        height      = defaults.height,\r\n        orientation = that.orientation;\r\n\r\n    var ret = {\r\n        width : img.width,\r\n        height: img.height\r\n    };\r\n\r\n    if (\"5678\".indexOf(orientation) > -1) {\r\n        ret.width  = img.height;\r\n        ret.height = img.width;\r\n    }\r\n\r\n    // 如果原图小于设定，采用原图\r\n    if (ret.width < width || ret.height < height) {\r\n        return ret;\r\n    }\r\n\r\n    var scale = ret.width / ret.height;\r\n\r\n    if (width && height) {\r\n        if (scale >= width / height) {\r\n            if (ret.width > width) {\r\n                ret.width  = width;\r\n                ret.height = Math.ceil(width / scale);\r\n            }\r\n        } else {\r\n            if (ret.height > height) {\r\n                ret.height = height;\r\n                ret.width  = Math.ceil(height * scale);\r\n            }\r\n        }\r\n    }\r\n    else if (width) {\r\n        if (width < ret.width) {\r\n            ret.width  = width;\r\n            ret.height = Math.ceil(width / scale);\r\n        }\r\n    }\r\n    else if (height) {\r\n        if (height < ret.height) {\r\n            ret.width  = Math.ceil(height * scale);\r\n            ret.height = height;\r\n        }\r\n    }\r\n\r\n    // 超过这个值base64无法生成，在IOS上\r\n    while (ret.width >= 3264 || ret.height >= 2448) {\r\n        ret.width *= 0.8;\r\n        ret.height *= 0.8;\r\n    }\r\n\r\n    return ret;\r\n};\r\n\r\n/**\r\n * 获取当前js文件所在路径，必须得在代码顶部执行此函数\r\n * @returns {string}\r\n */\r\nfunction getJsDir (src) {\r\n    var script = null;\r\n\r\n    if (src) {\r\n        script = [].filter.call(document.scripts, function (v) {\r\n            return v.src.indexOf(src) !== -1;\r\n        })[0];\r\n    } else {\r\n        script = document.scripts[document.scripts.length - 1];\r\n    }\r\n\r\n    if (!script) return null;\r\n\r\n    return script.src.substr(0, script.src.lastIndexOf('/'));\r\n}\r\n\r\n\r\n/**\r\n * 转换成formdata\r\n * @param dataURI\r\n * @returns {*}\r\n *\r\n * @source http://stackoverflow.com/questions/4998908/convert-data-uri-to-file-then-append-to-formdata\r\n */\r\nfunction dataURItoBlob (dataURI) {\r\n    // convert base64/URLEncoded data component to raw binary data held in a string\r\n    var byteString;\r\n    if (dataURI.split(',')[0].indexOf('base64') >= 0)\r\n        byteString = atob(dataURI.split(',')[1]);\r\n    else\r\n        byteString = unescape(dataURI.split(',')[1]);\r\n\r\n    // separate out the mime component\r\n    var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];\r\n\r\n    // write the bytes of the string to a typed array\r\n    var ia = new Uint8Array(byteString.length);\r\n    for (var i = 0; i < byteString.length; i++) {\r\n        ia[i] = byteString.charCodeAt(i);\r\n    }\r\n\r\n    return new BlobFormDataShim.Blob([ia.buffer], {type: mimeString});\r\n}\r\n\r\nwindow.lrz = function (file, opts) {\r\n    return new Lrz(file, opts);\r\n};\r\n\r\n// 版本号来自package.json，构建时自动填充\r\nwindow.lrz.version = '4.9.40';\r\n\r\nmodule.exports = window.lrz;\r\n\r\n/**\r\n *\r\n * 　　　┏┓　　　┏┓\r\n * 　　┏┛┻━━━┛┻┓\r\n * 　　┃　　　　　　　┃\r\n * 　　┃　　　━　　　┃\r\n * 　　┃　┳┛　┗┳　┃\r\n * 　　┃　　　　　　　┃\r\n * 　　┃　　　┻　　　┃\r\n * 　　┃　　　　　　　┃\r\n * 　　┗━┓　　　┏━┛Code is far away from bug with the animal protecting\r\n * 　　　　┃　　　┃    神兽保佑,代码无bug\r\n * 　　　　┃　　　┃\r\n * 　　　　┃　　　┗━━━┓\r\n * 　　　　┃　　　　　 ┣┓\r\n * 　　　　┃　　　　 ┏┛\r\n * 　　　　┗┓┓┏━┳┓┏┛\r\n * 　　　　　┃┫┫　┃┫┫\r\n * 　　　　　┗┻┛　┗┻┛\r\n *\r\n */\r\n\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/lrz.js\n// module id = 0\n// module chunks = 0","null\n\n\n// WEBPACK FOOTER //\n// src/lib/Promise.js","null\n\n\n// WEBPACK FOOTER //\n// node_modules/timers-browserify/main.js","null\n\n\n// WEBPACK FOOTER //\n// node_modules/setimmediate/setImmediate.js","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n// WEBPACK FOOTER //\n// node_modules/process/browser.js","//@source https://xts.so/demo/compress/index.html\r\n\r\n// 早期版本的浏览器需要用BlobBuilder来构造Blob，创建一个通用构造器来兼容早期版本\r\nvar BlobConstructor = ((function () {\r\n    try {\r\n        new Blob();\r\n        return true;\r\n    } catch (e) {\r\n        return false;\r\n    }\r\n})()) ? window.Blob : function (parts, opts) {\r\n    var bb = new (\r\n        window.BlobBuilder\r\n        || window.WebKitBlobBuilder\r\n        || window.MSBlobBuilder\r\n        || window.MozBlobBuilder\r\n    );\r\n    parts.forEach(function (p) {\r\n        bb.append(p);\r\n    });\r\n\r\n    return bb.getBlob(opts ? opts.type : undefined);\r\n};\r\n\r\n// Android上的AppleWebKit 534以前的内核存在一个Bug，\r\n// 导致FormData加入一个Blob对象后，上传的文件是0字节\r\nfunction hasFormDataBug () {\r\n    var bCheck = ~navigator.userAgent.indexOf('Android')\r\n        && ~navigator.vendor.indexOf('Google')\r\n        && !~navigator.userAgent.indexOf('Chrome');\r\n\r\n    // QQ X5浏览器也有这个BUG\r\n    return bCheck && navigator.userAgent.match(/AppleWebKit\\/(\\d+)/).pop() <= 534 || /MQQBrowser/g.test(navigator.userAgent);\r\n}\r\nvar FormDataShim=(function(){\r\n    var formDataShimNums = 0;\r\n    function FormDataShim () {\r\n        var\r\n        // Store a reference to this\r\n        o        = this,\r\n    \r\n        // Data to be sent\r\n        parts = [],\r\n    \r\n        // Boundary parameter for separating the multipart values\r\n        boundary = Array(21).join('-') + (+new Date() * (1e16 * Math.random())).toString(36),\r\n    \r\n        // Store the current XHR send method so we can safely override it\r\n        oldSend  = XMLHttpRequest.prototype.send;\r\n        this.getParts = function () {\r\n            return parts.toString();\r\n        };\r\n        this.append   = function (name, value, filename) {\r\n            parts.push('--' + boundary + '\\r\\nContent-Disposition: form-data; name=\"' + name + '\"');\r\n    \r\n            if (value instanceof Blob) {\r\n                parts.push('; filename=\"' + (filename || 'blob') + '\"\\r\\nContent-Type: ' + value.type + '\\r\\n\\r\\n');\r\n                parts.push(value);\r\n            }\r\n            else {\r\n                parts.push('\\r\\n\\r\\n' + value);\r\n            }\r\n            parts.push('\\r\\n');\r\n        };\r\n    \r\n        formDataShimNums++;\r\n        XMLHttpRequest.prototype.send = function (val) {\r\n            var fr,\r\n                data,\r\n                oXHR = this;\r\n    \r\n            if (val === o) {\r\n                // Append the final boundary string\r\n                parts.push('--' + boundary + '--\\r\\n');\r\n                // Create the blob\r\n                data = new BlobConstructor(parts);\r\n    \r\n                // Set up and read the blob into an array to be sent\r\n                fr         = new FileReader();\r\n                fr.onload  = function () {\r\n                    oldSend.call(oXHR, fr.result);\r\n                };\r\n                fr.onerror = function (err) {\r\n                    throw err;\r\n                };\r\n                fr.readAsArrayBuffer(data);\r\n    \r\n                // Set the multipart content type and boudary\r\n                this.setRequestHeader('Content-Type', 'multipart/form-data; boundary=' + boundary);\r\n                formDataShimNums--;\r\n                if(formDataShimNums == 0){\r\n                    XMLHttpRequest.prototype.send = oldSend;\r\n                }\r\n            }\r\n            else {\r\n                oldSend.call(this, val);\r\n            }\r\n        };\r\n    };\r\n    FormDataShim.prototype = Object.create(FormData.prototype);\r\n    return FormDataShim;\r\n})();\r\n\r\n\r\nmodule.exports = {\r\n    Blob    : BlobConstructor,\r\n    FormData: hasFormDataBug() ? FormDataShim : FormData\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// src/lib/Blob.FormData.shim.js","null\n\n\n// WEBPACK FOOTER //\n// src/lib/exif.js"],"sourceRoot":""}